/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LibraryLinkerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/bibleBooks.ts
var bibleBooksDE = [
  { "1mo": "1. Mose" },
  { "2mo": "2. Mose" },
  { "3mo": "3. Mose" },
  { "4mo": "4. Mose" },
  { "5mo": "5. Mose" },
  { jos: "Josua" },
  { ri: "Richter" },
  { ru: "Ruth" },
  { "1sam": "1. Samuel" },
  { "2sam": "2. Samuel" },
  { "1k\xF6": "1. K\xF6nige" },
  { "2k\xF6": "2. K\xF6nige" },
  { "1ch": "1. Chronika" },
  { "2ch": "2. Chronika" },
  { esr: "Esra" },
  { neh: "Nehemia" },
  { est: "Esther" },
  { hi: "Hiob" },
  { ps: "Psalm" },
  { spr: "Spr\xFCche" },
  { pred: "Prediger" },
  { hoh: "Hohes Lied" },
  { jes: "Jesaja" },
  { jer: "Jeremia" },
  { klag: "Klagelieder" },
  { hes: "Hesekiel" },
  { dan: "Daniel" },
  { hos: "Hosea" },
  { joe: "Joel" },
  { am: "Amos" },
  { ob: "Obadja" },
  { jon: "Jona" },
  { mi: "Micha" },
  { nah: "Nahum" },
  { hab: "Habakuk" },
  { zeph: "Zephanja" },
  { hag: "Haggai" },
  { sach: "Sacharja" },
  { mal: "Maleachi" },
  { mat: "Matth\xE4us" },
  { mar: "Markus" },
  { luk: "Lukas" },
  { joh: "Johannes" },
  { apg: "Apostelgeschichte" },
  { r\u00F6m: "R\xF6mer" },
  { "1kor": "1. Korinther" },
  { "2kor": "2. Korinther" },
  { gal: "Galater" },
  { eph: "Epheser" },
  { phil: "Philipper" },
  { kol: "Kolosser" },
  { "1thes": "1. Thessalonicher" },
  { "2thes": "2. Thessalonicher" },
  { "1tim": "1. Timotheus" },
  { "2tim": "2. Timotheus" },
  { tit: "Titus" },
  { philem: "Philemon" },
  { heb: "Hebr\xE4er" },
  { jak: "Jakobus" },
  { "1pet": "1. Petrus" },
  { "2pet": "2. Petrus" },
  { "1joh": "1. Johannes" },
  { "2joh": "2. Johannes" },
  { "3joh": "3. Johannes" },
  { jud: "Judas" },
  { offb: "Offenbarung" }
];

// main.ts
var DEFAULT_SETTINGS = {
  // Default settings will go here
};
var BibleReferenceSuggester = class extends import_obsidian.EditorSuggest {
  constructor(plugin) {
    super(plugin.app);
    this.plugin = plugin;
  }
  onTrigger(cursor, editor) {
    const line = editor.getLine(cursor.line);
    const subString = line.substring(0, cursor.ch);
    const match = subString.match(
      /(?:^|\s)(?:[-*+]\s+)?\/b\s+([a-z0-9äöüß]+\s*\d+:\d+(?:-\d+)?)?$/i
    );
    if (!match) return null;
    return {
      start: {
        ch: match.index + match[0].indexOf("/"),
        // Adjust start position to the actual command
        line: cursor.line
      },
      end: cursor,
      query: match[1] || ""
    };
  }
  getSuggestions(context) {
    const query = context.query;
    if (query.match(/^[a-z0-9äöüß]+\s*\d+:\d+(?:-\d+)?$/i)) {
      return [
        {
          text: query,
          command: "link",
          description: "Create JW Library link"
        },
        {
          text: query,
          command: "open",
          description: "Create JW Library link and open"
        }
      ];
    }
    return [];
  }
  renderSuggestion(suggestion, el) {
    el.setText(`${suggestion.description}`);
  }
  selectSuggestion(suggestion) {
    if (!this.context) return;
    const { context } = this;
    const editor = context.editor;
    const convertedLink = this.plugin.convertBibleTextToMarkdownLink(suggestion.text);
    editor.replaceRange(convertedLink, context.start, context.end);
    if (suggestion.command === "open") {
      const url = this.plugin.convertBibleTextToLink(suggestion.text);
      window.open(url);
    }
  }
};
var LibraryLinkerPlugin = class extends import_obsidian.Plugin {
  convertBibleReference(url) {
    url = url.replace("jwpub://", "jwlibrary://");
    const parts = url.split("/");
    const bibleRef = parts[parts.length - 1];
    const [startBookChapterVerse, endBookChapterVerse] = bibleRef.split("-");
    const [bookStart, chapterStart, verseStart] = startBookChapterVerse.split(":");
    const [bookEnd, chapterEnd, verseEnd] = endBookChapterVerse.split(":");
    const formattedChapterStart = chapterStart.padStart(3, "0");
    const formattedVerseStart = verseStart.padStart(3, "0");
    const formattedChapterEnd = chapterEnd.padStart(3, "0");
    const formattedVerseEnd = verseEnd.padStart(3, "0");
    const formattedReferenceStart = `${bookStart}${formattedChapterStart}${formattedVerseStart}`;
    const formattedReferenceEnd = `${bookEnd}${formattedChapterEnd}${formattedVerseEnd}`;
    const formattedReference = `${formattedReferenceStart}-${formattedReferenceEnd}`;
    return `jwlibrary:///finder?bible=${formattedReference}`;
  }
  convertPublicationReference(url) {
    const parts = url.split("/");
    const pubRef = parts[3];
    const [locale, docId] = pubRef.split(":");
    const paragraph = parts[4];
    return `jwlibrary:///finder?wtlocale=${locale}&docid=${docId}&par=${paragraph}`;
  }
  convertLinks(content, type) {
    const wikiLinkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
    return content.replace(wikiLinkRegex, (match, text, url) => {
      if (url.startsWith("jwpub://b/") && (type === "bible" || type === "all")) {
        return `[${text}](${this.convertBibleReference(url)})`;
      }
      if (url.startsWith("jwpub://p/") && (type === "publication" || type === "all")) {
        return `[${text}](${this.convertPublicationReference(url)})`;
      }
      return match;
    });
  }
  convertBibleTextToLink(input) {
    try {
      const reference = this.parseBibleReference(input);
      return this.formatJWLibraryLink(reference);
    } catch (error) {
      console.error("Error converting Bible text:", error.message);
      return input;
    }
  }
  parseBibleReference(input) {
    input = input.trim().toLowerCase();
    const match = input.match(/^([a-z0-9äöüß]+?)(?:\s*(\d+)\s*:\s*(\d+)(?:\s*-\s*(\d+))?$)/i);
    if (!match) {
      throw new Error("Invalid format");
    }
    const [, bookName, chapter, verseStart, verseEnd] = match;
    const bookIndex = this.findBookIndex(bookName.trim());
    if (bookIndex === -1) {
      throw new Error("Book not found");
    }
    return {
      book: bookIndex < 10 ? `0${bookIndex}` : bookIndex.toString(),
      chapter: chapter.padStart(3, "0"),
      verse: verseStart.padStart(3, "0"),
      endVerse: verseEnd ? verseEnd.padStart(3, "0") : void 0
    };
  }
  findBookIndex(bookQuery) {
    bookQuery = bookQuery.toLowerCase().trim();
    for (let i = 0; i < bibleBooksDE.length; i++) {
      const bookEntry = bibleBooksDE[i];
      const abbreviation = Object.keys(bookEntry)[0].toLowerCase();
      if (bookQuery === abbreviation) {
        return i + 1;
      }
    }
    return -1;
  }
  formatJWLibraryLink(reference) {
    const baseReference = `${reference.book}${reference.chapter}${reference.verse}`;
    const rangeReference = reference.endVerse ? `-${reference.book}${reference.chapter}${reference.endVerse}` : "";
    return `jwlibrary:///finder?bible=${baseReference}${rangeReference}`;
  }
  formatBibleText(input) {
    try {
      const reference = this.parseBibleReference(input);
      const bookIndex = parseInt(reference.book) - 1;
      const bookEntry = bibleBooksDE[bookIndex];
      const formattedBook = Object.values(bookEntry)[0];
      const verseRef = reference.endVerse ? `${parseInt(reference.verse)}-${parseInt(reference.endVerse)}` : parseInt(reference.verse);
      return `${formattedBook} ${parseInt(reference.chapter)}:${verseRef}`;
    } catch (error) {
      return input;
    }
  }
  convertBibleTextToMarkdownLink(input) {
    try {
      const url = this.convertBibleTextToLink(input);
      const formattedText = this.formatBibleText(input);
      if (url !== input) {
        return `[${formattedText}](${url})`;
      }
      return input;
    } catch (error) {
      return input;
    }
  }
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "replace-links",
      name: "Replace all links",
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = this.convertLinks(currentContent, "all");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "replace-bible-links",
      name: "Replace Bible verse links",
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = this.convertLinks(currentContent, "bible");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "replace-publication-links",
      name: "Replace publication links",
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = this.convertLinks(currentContent, "publication");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "convert-bible-text",
      name: "Convert Bible reference to Library link",
      editorCallback: (editor) => {
        const selection = editor.getSelection();
        if (selection) {
          const convertedLink = this.convertBibleTextToMarkdownLink(selection);
          editor.replaceSelection(convertedLink);
        }
      }
    });
    this.addSettingTab(new LinkReplacerSettingTab(this.app, this));
    this.bibleSuggester = new BibleReferenceSuggester(this);
    this.registerEditorSuggest(this.bibleSuggester);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LinkReplacerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvYmlibGVCb29rcy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgQXBwLFxuICBFZGl0b3IsXG4gIEVkaXRvclBvc2l0aW9uLFxuICBFZGl0b3JTdWdnZXN0LFxuICBFZGl0b3JTdWdnZXN0Q29udGV4dCxcbiAgRWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvLFxuICBQbHVnaW4sXG4gIFBsdWdpblNldHRpbmdUYWIsXG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGJpYmxlQm9va3NERSB9IGZyb20gJy4vc3JjL2JpYmxlQm9va3MnO1xuXG5pbnRlcmZhY2UgTGlua1JlcGxhY2VyU2V0dGluZ3Mge1xuICAvLyBXZSdsbCBhZGQgc2V0dGluZ3MgbGF0ZXIgaWYgbmVlZGVkXG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExpbmtSZXBsYWNlclNldHRpbmdzID0ge1xuICAvLyBEZWZhdWx0IHNldHRpbmdzIHdpbGwgZ28gaGVyZVxufTtcblxuaW50ZXJmYWNlIEJpYmxlU3VnZ2VzdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbiAgY29tbWFuZDogJ2xpbmsnIHwgJ29wZW4nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQmlibGVSZWZlcmVuY2Uge1xuICBib29rOiBzdHJpbmc7XG4gIGNoYXB0ZXI6IHN0cmluZztcbiAgdmVyc2U6IHN0cmluZztcbiAgZW5kVmVyc2U/OiBzdHJpbmc7XG59XG5cbmNsYXNzIEJpYmxlUmVmZXJlbmNlU3VnZ2VzdGVyIGV4dGVuZHMgRWRpdG9yU3VnZ2VzdDxCaWJsZVN1Z2dlc3Rpb24+IHtcbiAgcGx1Z2luOiBMaWJyYXJ5TGlua2VyUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTGlicmFyeUxpbmtlclBsdWdpbikge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25UcmlnZ2VyKGN1cnNvcjogRWRpdG9yUG9zaXRpb24sIGVkaXRvcjogRWRpdG9yKTogRWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvIHwgbnVsbCB7XG4gICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCBzdWJTdHJpbmcgPSBsaW5lLnN1YnN0cmluZygwLCBjdXJzb3IuY2gpO1xuXG4gICAgLy8gTW9kaWZpZWQgcmVnZXggdG8gaGFuZGxlIGJ1bGxldCBwb2ludHMgYW5kIG90aGVyIGxpc3QgbWFya2VycyBhdCBzdGFydCBvZiBsaW5lXG4gICAgY29uc3QgbWF0Y2ggPSBzdWJTdHJpbmcubWF0Y2goXG4gICAgICAvKD86XnxcXHMpKD86Wy0qK11cXHMrKT9cXC9iXFxzKyhbYS16MC05XHUwMEU0XHUwMEY2XHUwMEZDXHUwMERGXStcXHMqXFxkKzpcXGQrKD86LVxcZCspPyk/JC9pLFxuICAgICk7XG5cbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydDoge1xuICAgICAgICBjaDogbWF0Y2guaW5kZXghICsgbWF0Y2hbMF0uaW5kZXhPZignLycpLCAvLyBBZGp1c3Qgc3RhcnQgcG9zaXRpb24gdG8gdGhlIGFjdHVhbCBjb21tYW5kXG4gICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxuICAgICAgfSxcbiAgICAgIGVuZDogY3Vyc29yLFxuICAgICAgcXVlcnk6IG1hdGNoWzFdIHx8ICcnLFxuICAgIH07XG4gIH1cblxuICBnZXRTdWdnZXN0aW9ucyhjb250ZXh0OiBFZGl0b3JTdWdnZXN0Q29udGV4dCk6IEJpYmxlU3VnZ2VzdGlvbltdIHtcbiAgICBjb25zdCBxdWVyeSA9IGNvbnRleHQucXVlcnk7XG5cbiAgICAvLyBSZWdleCB0aGF0IGhhbmRsZXMgYm90aCB3aXRoIGFuZCB3aXRob3V0IHNwYWNlXG4gICAgaWYgKHF1ZXJ5Lm1hdGNoKC9eW2EtejAtOVx1MDBFNFx1MDBGNlx1MDBGQ1x1MDBERl0rXFxzKlxcZCs6XFxkKyg/Oi1cXGQrKT8kL2kpKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogcXVlcnksXG4gICAgICAgICAgY29tbWFuZDogJ2xpbmsnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIEpXIExpYnJhcnkgbGluaycsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBxdWVyeSxcbiAgICAgICAgICBjb21tYW5kOiAnb3BlbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGUgSlcgTGlicmFyeSBsaW5rIGFuZCBvcGVuJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHJlbmRlclN1Z2dlc3Rpb24oc3VnZ2VzdGlvbjogQmlibGVTdWdnZXN0aW9uLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBlbC5zZXRUZXh0KGAke3N1Z2dlc3Rpb24uZGVzY3JpcHRpb259YCk7XG4gIH1cblxuICBzZWxlY3RTdWdnZXN0aW9uKHN1Z2dlc3Rpb246IEJpYmxlU3VnZ2VzdGlvbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250ZXh0KSByZXR1cm47XG5cbiAgICBjb25zdCB7IGNvbnRleHQgfSA9IHRoaXM7XG4gICAgY29uc3QgZWRpdG9yID0gY29udGV4dC5lZGl0b3I7XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBCaWJsZSByZWZlcmVuY2UgdG8gYSBsaW5rXG4gICAgY29uc3QgY29udmVydGVkTGluayA9IHRoaXMucGx1Z2luLmNvbnZlcnRCaWJsZVRleHRUb01hcmtkb3duTGluayhzdWdnZXN0aW9uLnRleHQpO1xuXG4gICAgLy8gUmVwbGFjZSB0aGUgZW50aXJlIGNvbW1hbmQgYW5kIHJlZmVyZW5jZSB3aXRoIHRoZSBjb252ZXJ0ZWQgbGlua1xuICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoY29udmVydGVkTGluaywgY29udGV4dC5zdGFydCwgY29udGV4dC5lbmQpO1xuXG4gICAgLy8gSWYgdGhpcyB3YXMgYSAvYm8gY29tbWFuZCwgb3BlbiB0aGUgbGlua1xuICAgIGlmIChzdWdnZXN0aW9uLmNvbW1hbmQgPT09ICdvcGVuJykge1xuICAgICAgY29uc3QgdXJsID0gdGhpcy5wbHVnaW4uY29udmVydEJpYmxlVGV4dFRvTGluayhzdWdnZXN0aW9uLnRleHQpO1xuICAgICAgd2luZG93Lm9wZW4odXJsKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlicmFyeUxpbmtlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBMaW5rUmVwbGFjZXJTZXR0aW5ncztcbiAgcHJpdmF0ZSBiaWJsZVN1Z2dlc3RlcjogQmlibGVSZWZlcmVuY2VTdWdnZXN0ZXI7XG5cbiAgcHJpdmF0ZSBjb252ZXJ0QmlibGVSZWZlcmVuY2UodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlcGxhY2UgJ2p3cHViOi8vJyB3aXRoICdqd2xpYnJhcnk6Ly8nXG4gICAgdXJsID0gdXJsLnJlcGxhY2UoJ2p3cHViOi8vJywgJ2p3bGlicmFyeTovLycpO1xuICAgIC8vIEV4dHJhY3QgdGhlIEJpYmxlIHJlZmVyZW5jZSBwYXJ0c1xuICAgIGNvbnN0IHBhcnRzID0gdXJsLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgYmlibGVSZWYgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblxuICAgIC8vIEV4dHJhY3QgYm9vaywgY2hhcHRlciBhbmQgdmVyc2VcbiAgICBjb25zdCBbc3RhcnRCb29rQ2hhcHRlclZlcnNlLCBlbmRCb29rQ2hhcHRlclZlcnNlXSA9IGJpYmxlUmVmLnNwbGl0KCctJyk7XG4gICAgY29uc3QgW2Jvb2tTdGFydCwgY2hhcHRlclN0YXJ0LCB2ZXJzZVN0YXJ0XSA9IHN0YXJ0Qm9va0NoYXB0ZXJWZXJzZS5zcGxpdCgnOicpO1xuICAgIGNvbnN0IFtib29rRW5kLCBjaGFwdGVyRW5kLCB2ZXJzZUVuZF0gPSBlbmRCb29rQ2hhcHRlclZlcnNlLnNwbGl0KCc6Jyk7XG5cbiAgICAvLyBGb3JtYXQgdGhlIG51bWJlcnMgdG8gZW5zdXJlIHByb3BlciBwYWRkaW5nXG4gICAgY29uc3QgZm9ybWF0dGVkQ2hhcHRlclN0YXJ0ID0gY2hhcHRlclN0YXJ0LnBhZFN0YXJ0KDMsICcwJyk7XG4gICAgY29uc3QgZm9ybWF0dGVkVmVyc2VTdGFydCA9IHZlcnNlU3RhcnQucGFkU3RhcnQoMywgJzAnKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRDaGFwdGVyRW5kID0gY2hhcHRlckVuZC5wYWRTdGFydCgzLCAnMCcpO1xuICAgIGNvbnN0IGZvcm1hdHRlZFZlcnNlRW5kID0gdmVyc2VFbmQucGFkU3RhcnQoMywgJzAnKTtcblxuICAgIGNvbnN0IGZvcm1hdHRlZFJlZmVyZW5jZVN0YXJ0ID0gYCR7Ym9va1N0YXJ0fSR7Zm9ybWF0dGVkQ2hhcHRlclN0YXJ0fSR7Zm9ybWF0dGVkVmVyc2VTdGFydH1gO1xuICAgIGNvbnN0IGZvcm1hdHRlZFJlZmVyZW5jZUVuZCA9IGAke2Jvb2tFbmR9JHtmb3JtYXR0ZWRDaGFwdGVyRW5kfSR7Zm9ybWF0dGVkVmVyc2VFbmR9YDtcblxuICAgIGNvbnN0IGZvcm1hdHRlZFJlZmVyZW5jZSA9IGAke2Zvcm1hdHRlZFJlZmVyZW5jZVN0YXJ0fS0ke2Zvcm1hdHRlZFJlZmVyZW5jZUVuZH1gO1xuXG4gICAgcmV0dXJuIGBqd2xpYnJhcnk6Ly8vZmluZGVyP2JpYmxlPSR7Zm9ybWF0dGVkUmVmZXJlbmNlfWA7XG4gIH1cblxuICBwcml2YXRlIGNvbnZlcnRQdWJsaWNhdGlvblJlZmVyZW5jZSh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTtcbiAgICBjb25zdCBwdWJSZWYgPSBwYXJ0c1szXTtcbiAgICBjb25zdCBbbG9jYWxlLCBkb2NJZF0gPSBwdWJSZWYuc3BsaXQoJzonKTtcbiAgICBjb25zdCBwYXJhZ3JhcGggPSBwYXJ0c1s0XTtcblxuICAgIHJldHVybiBgandsaWJyYXJ5Oi8vL2ZpbmRlcj93dGxvY2FsZT0ke2xvY2FsZX0mZG9jaWQ9JHtkb2NJZH0mcGFyPSR7cGFyYWdyYXBofWA7XG4gIH1cblxuICBwcml2YXRlIGNvbnZlcnRMaW5rcyhjb250ZW50OiBzdHJpbmcsIHR5cGU/OiAnYmlibGUnIHwgJ3B1YmxpY2F0aW9uJyB8ICdhbGwnKTogc3RyaW5nIHtcbiAgICBjb25zdCB3aWtpTGlua1JlZ2V4ID0gL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvZztcblxuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2Uod2lraUxpbmtSZWdleCwgKG1hdGNoLCB0ZXh0LCB1cmwpID0+IHtcbiAgICAgIC8vIEhhbmRsZSBCaWJsZSByZWZlcmVuY2VzXG4gICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2p3cHViOi8vYi8nKSAmJiAodHlwZSA9PT0gJ2JpYmxlJyB8fCB0eXBlID09PSAnYWxsJykpIHtcbiAgICAgICAgcmV0dXJuIGBbJHt0ZXh0fV0oJHt0aGlzLmNvbnZlcnRCaWJsZVJlZmVyZW5jZSh1cmwpfSlgO1xuICAgICAgfVxuICAgICAgLy8gSGFuZGxlIHB1YmxpY2F0aW9uIHJlZmVyZW5jZXNcbiAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnandwdWI6Ly9wLycpICYmICh0eXBlID09PSAncHVibGljYXRpb24nIHx8IHR5cGUgPT09ICdhbGwnKSkge1xuICAgICAgICByZXR1cm4gYFske3RleHR9XSgke3RoaXMuY29udmVydFB1YmxpY2F0aW9uUmVmZXJlbmNlKHVybCl9KWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgY29udmVydEJpYmxlVGV4dFRvTGluayhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVmZXJlbmNlID0gdGhpcy5wYXJzZUJpYmxlUmVmZXJlbmNlKGlucHV0KTtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdEpXTGlicmFyeUxpbmsocmVmZXJlbmNlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29udmVydGluZyBCaWJsZSB0ZXh0OicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VCaWJsZVJlZmVyZW5jZShpbnB1dDogc3RyaW5nKTogQmlibGVSZWZlcmVuY2Uge1xuICAgIGlucHV0ID0gaW5wdXQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBjb25zdCBtYXRjaCA9IGlucHV0Lm1hdGNoKC9eKFthLXowLTlcdTAwRTRcdTAwRjZcdTAwRkNcdTAwREZdKz8pKD86XFxzKihcXGQrKVxccyo6XFxzKihcXGQrKSg/OlxccyotXFxzKihcXGQrKSk/JCkvaSk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZvcm1hdCcpO1xuICAgIH1cblxuICAgIGNvbnN0IFssIGJvb2tOYW1lLCBjaGFwdGVyLCB2ZXJzZVN0YXJ0LCB2ZXJzZUVuZF0gPSBtYXRjaDtcbiAgICBjb25zdCBib29rSW5kZXggPSB0aGlzLmZpbmRCb29rSW5kZXgoYm9va05hbWUudHJpbSgpKTtcbiAgICBpZiAoYm9va0luZGV4ID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb29rIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBib29rOiBib29rSW5kZXggPCAxMCA/IGAwJHtib29rSW5kZXh9YCA6IGJvb2tJbmRleC50b1N0cmluZygpLFxuICAgICAgY2hhcHRlcjogY2hhcHRlci5wYWRTdGFydCgzLCAnMCcpLFxuICAgICAgdmVyc2U6IHZlcnNlU3RhcnQucGFkU3RhcnQoMywgJzAnKSxcbiAgICAgIGVuZFZlcnNlOiB2ZXJzZUVuZCA/IHZlcnNlRW5kLnBhZFN0YXJ0KDMsICcwJykgOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZEJvb2tJbmRleChib29rUXVlcnk6IHN0cmluZyk6IG51bWJlciB7XG4gICAgYm9va1F1ZXJ5ID0gYm9va1F1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmlibGVCb29rc0RFLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBib29rRW50cnkgPSBiaWJsZUJvb2tzREVbaV07XG4gICAgICAvLyBPbmx5IG1hdGNoIHRoZSBhYmJyZXZpYXRpb24sIG5vdCB0aGUgZnVsbCBuYW1lXG4gICAgICBjb25zdCBhYmJyZXZpYXRpb24gPSBPYmplY3Qua2V5cyhib29rRW50cnkpWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoYm9va1F1ZXJ5ID09PSBhYmJyZXZpYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGkgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEpXTGlicmFyeUxpbmsocmVmZXJlbmNlOiBCaWJsZVJlZmVyZW5jZSk6IHN0cmluZyB7XG4gICAgY29uc3QgYmFzZVJlZmVyZW5jZSA9IGAke3JlZmVyZW5jZS5ib29rfSR7cmVmZXJlbmNlLmNoYXB0ZXJ9JHtyZWZlcmVuY2UudmVyc2V9YDtcbiAgICBjb25zdCByYW5nZVJlZmVyZW5jZSA9IHJlZmVyZW5jZS5lbmRWZXJzZVxuICAgICAgPyBgLSR7cmVmZXJlbmNlLmJvb2t9JHtyZWZlcmVuY2UuY2hhcHRlcn0ke3JlZmVyZW5jZS5lbmRWZXJzZX1gXG4gICAgICA6ICcnO1xuICAgIHJldHVybiBgandsaWJyYXJ5Oi8vL2ZpbmRlcj9iaWJsZT0ke2Jhc2VSZWZlcmVuY2V9JHtyYW5nZVJlZmVyZW5jZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRCaWJsZVRleHQoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IHRoaXMucGFyc2VCaWJsZVJlZmVyZW5jZShpbnB1dCk7XG4gICAgICBjb25zdCBib29rSW5kZXggPSBwYXJzZUludChyZWZlcmVuY2UuYm9vaykgLSAxO1xuICAgICAgY29uc3QgYm9va0VudHJ5ID0gYmlibGVCb29rc0RFW2Jvb2tJbmRleF07XG4gICAgICBjb25zdCBmb3JtYXR0ZWRCb29rID0gT2JqZWN0LnZhbHVlcyhib29rRW50cnkpWzBdO1xuXG4gICAgICAvLyBGb3JtYXQgdGhlIHZlcnNlIHJlZmVyZW5jZVxuICAgICAgY29uc3QgdmVyc2VSZWYgPSByZWZlcmVuY2UuZW5kVmVyc2VcbiAgICAgICAgPyBgJHtwYXJzZUludChyZWZlcmVuY2UudmVyc2UpfS0ke3BhcnNlSW50KHJlZmVyZW5jZS5lbmRWZXJzZSl9YFxuICAgICAgICA6IHBhcnNlSW50KHJlZmVyZW5jZS52ZXJzZSk7XG5cbiAgICAgIHJldHVybiBgJHtmb3JtYXR0ZWRCb29rfSAke3BhcnNlSW50KHJlZmVyZW5jZS5jaGFwdGVyKX06JHt2ZXJzZVJlZn1gO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNvbnZlcnRCaWJsZVRleHRUb01hcmtkb3duTGluayhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gdGhpcy5jb252ZXJ0QmlibGVUZXh0VG9MaW5rKGlucHV0KTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSB0aGlzLmZvcm1hdEJpYmxlVGV4dChpbnB1dCk7XG4gICAgICAvLyBPbmx5IGNyZWF0ZSBtYXJrZG93biBsaW5rIGlmIGNvbnZlcnNpb24gd2FzIHN1Y2Nlc3NmdWxcbiAgICAgIGlmICh1cmwgIT09IGlucHV0KSB7XG4gICAgICAgIHJldHVybiBgWyR7Zm9ybWF0dGVkVGV4dH1dKCR7dXJsfSlgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBBZGQgdGhlIGNvbW1hbmQgZm9yIGFsbCBsaW5rIHJlcGxhY2VtZW50XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncmVwbGFjZS1saW5rcycsXG4gICAgICBuYW1lOiAnUmVwbGFjZSBhbGwgbGlua3MnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IHRoaXMuY29udmVydExpbmtzKGN1cnJlbnRDb250ZW50LCAnYWxsJyk7XG4gICAgICAgIGlmIChjdXJyZW50Q29udGVudCAhPT0gdXBkYXRlZENvbnRlbnQpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodXBkYXRlZENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQgZm9yIEJpYmxlIGxpbmtzIG9ubHlcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdyZXBsYWNlLWJpYmxlLWxpbmtzJyxcbiAgICAgIG5hbWU6ICdSZXBsYWNlIEJpYmxlIHZlcnNlIGxpbmtzJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSB0aGlzLmNvbnZlcnRMaW5rcyhjdXJyZW50Q29udGVudCwgJ2JpYmxlJyk7XG4gICAgICAgIGlmIChjdXJyZW50Q29udGVudCAhPT0gdXBkYXRlZENvbnRlbnQpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodXBkYXRlZENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQgZm9yIHB1YmxpY2F0aW9uIGxpbmtzIG9ubHlcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdyZXBsYWNlLXB1YmxpY2F0aW9uLWxpbmtzJyxcbiAgICAgIG5hbWU6ICdSZXBsYWNlIHB1YmxpY2F0aW9uIGxpbmtzJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSB0aGlzLmNvbnZlcnRMaW5rcyhjdXJyZW50Q29udGVudCwgJ3B1YmxpY2F0aW9uJyk7XG4gICAgICAgIGlmIChjdXJyZW50Q29udGVudCAhPT0gdXBkYXRlZENvbnRlbnQpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodXBkYXRlZENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQgZm9yIEJpYmxlIHRleHQgY29udmVyc2lvblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvbnZlcnQtYmlibGUtdGV4dCcsXG4gICAgICBuYW1lOiAnQ29udmVydCBCaWJsZSByZWZlcmVuY2UgdG8gTGlicmFyeSBsaW5rJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgY29uc3QgY29udmVydGVkTGluayA9IHRoaXMuY29udmVydEJpYmxlVGV4dFRvTWFya2Rvd25MaW5rKHNlbGVjdGlvbik7XG4gICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oY29udmVydGVkTGluayk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBMaW5rUmVwbGFjZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAvLyBSZWdpc3RlciB0aGUgQmlibGUgcmVmZXJlbmNlIHN1Z2dlc3RlclxuICAgIHRoaXMuYmlibGVTdWdnZXN0ZXIgPSBuZXcgQmlibGVSZWZlcmVuY2VTdWdnZXN0ZXIodGhpcyk7XG4gICAgdGhpcy5yZWdpc3RlckVkaXRvclN1Z2dlc3QodGhpcy5iaWJsZVN1Z2dlc3Rlcik7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICAvLyBDbGVhbiB1cCBwbHVnaW4gcmVzb3VyY2VzIGlmIG5lZWRlZFxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuY2xhc3MgTGlua1JlcGxhY2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IExpYnJhcnlMaW5rZXJQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlicmFyeUxpbmtlclBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgLy8gV2UnbGwgYWRkIHNldHRpbmdzIFVJIGVsZW1lbnRzIGhlcmUgd2hlbiBuZWVkZWRcbiAgfVxufVxuIiwgImV4cG9ydCB0eXBlIEJpYmxlQm9va0FiYnJldmlhdGlvbnMgPSByZWFkb25seSBzdHJpbmdbXTtcbmV4cG9ydCB0eXBlIEJpYmxlQm9va3MgPSByZWFkb25seSBCaWJsZUJvb2tBYmJyZXZpYXRpb25zW107XG5cbmV4cG9ydCBjb25zdCBiaWJsZUJvb2tzREUgPSBbXG4gIHsgJzFtbyc6ICcxLiBNb3NlJyB9LFxuICB7ICcybW8nOiAnMi4gTW9zZScgfSxcbiAgeyAnM21vJzogJzMuIE1vc2UnIH0sXG4gIHsgJzRtbyc6ICc0LiBNb3NlJyB9LFxuICB7ICc1bW8nOiAnNS4gTW9zZScgfSxcbiAgeyBqb3M6ICdKb3N1YScgfSxcbiAgeyByaTogJ1JpY2h0ZXInIH0sXG4gIHsgcnU6ICdSdXRoJyB9LFxuICB7ICcxc2FtJzogJzEuIFNhbXVlbCcgfSxcbiAgeyAnMnNhbSc6ICcyLiBTYW11ZWwnIH0sXG4gIHsgJzFrXHUwMEY2JzogJzEuIEtcdTAwRjZuaWdlJyB9LFxuICB7ICcya1x1MDBGNic6ICcyLiBLXHUwMEY2bmlnZScgfSxcbiAgeyAnMWNoJzogJzEuIENocm9uaWthJyB9LFxuICB7ICcyY2gnOiAnMi4gQ2hyb25pa2EnIH0sXG4gIHsgZXNyOiAnRXNyYScgfSxcbiAgeyBuZWg6ICdOZWhlbWlhJyB9LFxuICB7IGVzdDogJ0VzdGhlcicgfSxcbiAgeyBoaTogJ0hpb2InIH0sXG4gIHsgcHM6ICdQc2FsbScgfSxcbiAgeyBzcHI6ICdTcHJcdTAwRkNjaGUnIH0sXG4gIHsgcHJlZDogJ1ByZWRpZ2VyJyB9LFxuICB7IGhvaDogJ0hvaGVzIExpZWQnIH0sXG4gIHsgamVzOiAnSmVzYWphJyB9LFxuICB7IGplcjogJ0plcmVtaWEnIH0sXG4gIHsga2xhZzogJ0tsYWdlbGllZGVyJyB9LFxuICB7IGhlczogJ0hlc2VraWVsJyB9LFxuICB7IGRhbjogJ0RhbmllbCcgfSxcbiAgeyBob3M6ICdIb3NlYScgfSxcbiAgeyBqb2U6ICdKb2VsJyB9LFxuICB7IGFtOiAnQW1vcycgfSxcbiAgeyBvYjogJ09iYWRqYScgfSxcbiAgeyBqb246ICdKb25hJyB9LFxuICB7IG1pOiAnTWljaGEnIH0sXG4gIHsgbmFoOiAnTmFodW0nIH0sXG4gIHsgaGFiOiAnSGFiYWt1aycgfSxcbiAgeyB6ZXBoOiAnWmVwaGFuamEnIH0sXG4gIHsgaGFnOiAnSGFnZ2FpJyB9LFxuICB7IHNhY2g6ICdTYWNoYXJqYScgfSxcbiAgeyBtYWw6ICdNYWxlYWNoaScgfSxcbiAgeyBtYXQ6ICdNYXR0aFx1MDBFNHVzJyB9LFxuICB7IG1hcjogJ01hcmt1cycgfSxcbiAgeyBsdWs6ICdMdWthcycgfSxcbiAgeyBqb2g6ICdKb2hhbm5lcycgfSxcbiAgeyBhcGc6ICdBcG9zdGVsZ2VzY2hpY2h0ZScgfSxcbiAgeyByXHUwMEY2bTogJ1JcdTAwRjZtZXInIH0sXG4gIHsgJzFrb3InOiAnMS4gS29yaW50aGVyJyB9LFxuICB7ICcya29yJzogJzIuIEtvcmludGhlcicgfSxcbiAgeyBnYWw6ICdHYWxhdGVyJyB9LFxuICB7IGVwaDogJ0VwaGVzZXInIH0sXG4gIHsgcGhpbDogJ1BoaWxpcHBlcicgfSxcbiAgeyBrb2w6ICdLb2xvc3NlcicgfSxcbiAgeyAnMXRoZXMnOiAnMS4gVGhlc3NhbG9uaWNoZXInIH0sXG4gIHsgJzJ0aGVzJzogJzIuIFRoZXNzYWxvbmljaGVyJyB9LFxuICB7ICcxdGltJzogJzEuIFRpbW90aGV1cycgfSxcbiAgeyAnMnRpbSc6ICcyLiBUaW1vdGhldXMnIH0sXG4gIHsgdGl0OiAnVGl0dXMnIH0sXG4gIHsgcGhpbGVtOiAnUGhpbGVtb24nIH0sXG4gIHsgaGViOiAnSGViclx1MDBFNGVyJyB9LFxuICB7IGphazogJ0pha29idXMnIH0sXG4gIHsgJzFwZXQnOiAnMS4gUGV0cnVzJyB9LFxuICB7ICcycGV0JzogJzIuIFBldHJ1cycgfSxcbiAgeyAnMWpvaCc6ICcxLiBKb2hhbm5lcycgfSxcbiAgeyAnMmpvaCc6ICcyLiBKb2hhbm5lcycgfSxcbiAgeyAnM2pvaCc6ICczLiBKb2hhbm5lcycgfSxcbiAgeyBqdWQ6ICdKdWRhcycgfSxcbiAgeyBvZmZiOiAnT2ZmZW5iYXJ1bmcnIH0sXG5dIGFzIGNvbnN0O1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQVNPOzs7QUNOQSxJQUFNLGVBQWU7QUFBQSxFQUMxQixFQUFFLE9BQU8sVUFBVTtBQUFBLEVBQ25CLEVBQUUsT0FBTyxVQUFVO0FBQUEsRUFDbkIsRUFBRSxPQUFPLFVBQVU7QUFBQSxFQUNuQixFQUFFLE9BQU8sVUFBVTtBQUFBLEVBQ25CLEVBQUUsT0FBTyxVQUFVO0FBQUEsRUFDbkIsRUFBRSxLQUFLLFFBQVE7QUFBQSxFQUNmLEVBQUUsSUFBSSxVQUFVO0FBQUEsRUFDaEIsRUFBRSxJQUFJLE9BQU87QUFBQSxFQUNiLEVBQUUsUUFBUSxZQUFZO0FBQUEsRUFDdEIsRUFBRSxRQUFRLFlBQVk7QUFBQSxFQUN0QixFQUFFLFVBQU8sZUFBWTtBQUFBLEVBQ3JCLEVBQUUsVUFBTyxlQUFZO0FBQUEsRUFDckIsRUFBRSxPQUFPLGNBQWM7QUFBQSxFQUN2QixFQUFFLE9BQU8sY0FBYztBQUFBLEVBQ3ZCLEVBQUUsS0FBSyxPQUFPO0FBQUEsRUFDZCxFQUFFLEtBQUssVUFBVTtBQUFBLEVBQ2pCLEVBQUUsS0FBSyxTQUFTO0FBQUEsRUFDaEIsRUFBRSxJQUFJLE9BQU87QUFBQSxFQUNiLEVBQUUsSUFBSSxRQUFRO0FBQUEsRUFDZCxFQUFFLEtBQUssYUFBVTtBQUFBLEVBQ2pCLEVBQUUsTUFBTSxXQUFXO0FBQUEsRUFDbkIsRUFBRSxLQUFLLGFBQWE7QUFBQSxFQUNwQixFQUFFLEtBQUssU0FBUztBQUFBLEVBQ2hCLEVBQUUsS0FBSyxVQUFVO0FBQUEsRUFDakIsRUFBRSxNQUFNLGNBQWM7QUFBQSxFQUN0QixFQUFFLEtBQUssV0FBVztBQUFBLEVBQ2xCLEVBQUUsS0FBSyxTQUFTO0FBQUEsRUFDaEIs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U0FBUztBQUN2QyxjQUFNLGlCQUFpQixLQUFLLGFBQWEsZ0JBQWdCLE9BQU87QUFDaEUsWUFBSSxtQkFBbUIsZ0JBQWdCO0FBQ3JDLGlCQUFPLFNBQVMsY0FBYztBQUFBLFFBQ2hDO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsV0FBbUI7QUFDbEMsY0FBTSxpQkFBaUIsT0FBTyxTQUFTO0FBQ3ZDLGNBQU0saUJBQWlCLEtBQUssYUFBYSxnQkFBZ0IsYUFBYTtBQUN0RSxZQUFJLG1CQUFtQixnQkFBZ0I7QUFDckMsaUJBQU8sU0FBUyxjQUFjO0FBQUEsUUFDaEM7QUFBQSxNQUNGO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxXQUFtQjtBQUNsQyxjQUFNLFlBQVksT0FBTyxhQUFhO0FBQ3RDLFlBQUksV0FBVztBQUNiLGdCQUFNLGdCQUFnQixLQUFLLCtCQUErQixTQUFTO0FBQ25FLGlCQUFPLGlCQUFpQixhQUFhO0FBQUEsUUFDdkM7QUFBQSxNQUNGO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxjQUFjLElBQUksdUJBQXVCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFHN0QsU0FBSyxpQkFBaUIsSUFBSSx3QkFBd0IsSUFBSTtBQUN0RCxTQUFLLHNCQUFzQixLQUFLLGNBQWM7QUFBQSxFQUNoRDtBQUFBLEVBRUEsV0FBVztBQUFBLEVBRVg7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzNFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbkM7QUFDRjtBQUVBLElBQU0seUJBQU4sY0FBcUMsaUNBQWlCO0FBQUEsRUFHcEQsWUFBWSxLQUFVLFFBQTZCO0FBQ2pELFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxVQUFnQjtBQUNkLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUFBLEVBR3BCO0FBQ0Y7IiwKICAibmFtZXMiOiBbXQp9Cg==
