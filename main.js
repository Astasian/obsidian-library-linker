/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var R=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var D=(t,n)=>{for(var s in n)R(t,s,{get:n[s],enumerable:!0})},W=(t,n,s,e)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of z(n))!K.call(t,a)&&a!==s&&R(t,a,{get:()=>n[a],enumerable:!(e=O(n,a))||e.enumerable});return t};var G=t=>W(R({},"__esModule",{value:!0}),t);var X={};D(X,{default:()=>w,matchingBibleReferenceRegex:()=>U});module.exports=G(X);var f=require("obsidian");function T(t){t=t.replace("jwpub://","jwlibrary://");let n=t.split("/"),s=n[n.length-1],[e,a]=s.split("-"),[i,r,o]=e.split(":"),[l,m,p]=a.split(":"),d=r.padStart(3,"0"),h=o.padStart(3,"0"),c=m.padStart(3,"0"),N=p.padStart(3,"0"),k=`${i}${d}${h}`,C=`${l}${c}${N}`;return`jwlibrary:///finder?bible=${k===C?k:`${k}-${C}`}`}function J(t){let n=t.split("/"),s=n[3],[e,a]=s.split(":"),i=n[4];return`jwlibrary:///finder?wtlocale=${e}&docid=${a}&par=${i}`}function L(t,n="all"){let s=/\[([^\]]+)\]\(([^)]+)\)/g;return t.replace(s,(e,a,i)=>i.startsWith("jwpub://b/")&&(n==="bible"||n==="all")?`[${a}](${T(i)})`:i.startsWith("jwpub://p/")&&(n==="publication"||n==="all")?`[${a}](${J(i)})`:e)}var j=[{id:1,prefix:"1",aliases:["mose"],longName:"1. Mose",shortName:"1Mo"},{id:2,prefix:"2",aliases:["mose"],longName:"2. Mose",shortName:"2Mo"},{id:3,prefix:"3",aliases:["mose"],longName:"3. Mose",shortName:"3Mo"},{id:4,prefix:"4",aliases:["mose"],longName:"4. Mose",shortName:"4Mo"},{id:5,prefix:"5",aliases:["mose"],longName:"5. Mose",shortName:"5Mo"},{id:6,aliases:["josua"],longName:"Josua",shortName:"Jos"},{id:7,aliases:["richter"],longName:"Richter",shortName:"Ri"},{id:8,aliases:["ruth"],longName:"Ruth",shortName:"Ru"},{id:9,prefix:"1",aliases:["samuel"],longName:"1. Samuel",shortName:"1Sa"},{id:10,prefix:"2",aliases:["samuel"],longName:"2. Samuel",shortName:"2Sa"},{id:11,prefix:"1",aliases:["k\xF6nige","koenige"],longName:"1. K\xF6nige",shortName:"1K\xF6"},{id:12,prefix:"2",aliases:["k\xF6nige","koenige"],longName:"2. K\xF6nige",shortName:"2K\xF6"},{id:13,prefix:"1",aliases:["chronika"],longName:"1. Chronika",shortName:"1Ch"},{id:14,prefix:"2",aliases:["chronika"],longName:"2. Chronika",shortName:"2Ch"},{id:15,aliases:["esra"],longName:"Esra",shortName:"Esr"},{id:16,aliases:["nehemia"],longName:"Nehemia",shortName:"Ne"},{id:17,aliases:["esther"],longName:"Esther",shortName:"Est"},{id:18,aliases:["hiob"],longName:"Hiob",shortName:"Hi"},{id:19,aliases:["psalm"],longName:"Psalm",shortName:"Ps"},{id:20,aliases:["spr\xFCche","sprueche"],longName:"Spr\xFCche",shortName:"Spr"},{id:21,aliases:["prediger"],longName:"Prediger",shortName:"Pr"},{id:22,aliases:["hoheslied","hohes lied"],longName:"Hohes Lied",shortName:"Hoh"},{id:23,aliases:["jesaja"],longName:"Jesaja",shortName:"Jes"},{id:24,aliases:["jeremia"],longName:"Jeremia",shortName:"Jer"},{id:25,aliases:["klagelieder"],longName:"Klagelieder",shortName:"Klg"},{id:26,aliases:["hesekiel"],longName:"Hesekiel",shortName:"Hes"},{id:27,aliases:["daniel"],longName:"Daniel",shortName:"Da"},{id:28,aliases:["hosea"],longName:"Hosea",shortName:"Hos"},{id:29,aliases:["joel"],longName:"Joel",shortName:"Joel"},{id:30,aliases:["amos"],longName:"Amos",shortName:"Am"},{id:31,aliases:["obadja"],longName:"Obadja",shortName:"Ob"},{id:32,aliases:["jona"],longName:"Jona",shortName:"Jon"},{id:33,aliases:["micha"],longName:"Micha",shortName:"Mi"},{id:34,aliases:["nahum"],longName:"Nahum",shortName:"Nah"},{id:35,aliases:["habakuk"],longName:"Habakuk",shortName:"Hab"},{id:36,aliases:["zephanja","zefanja"],longName:"Zephanja",shortName:"Ze"},{id:37,aliases:["haggai"],longName:"Haggai",shortName:"Hag"},{id:38,aliases:["sacharja"],longName:"Sacharja",shortName:"Sach"},{id:39,aliases:["maleachi"],longName:"Maleachi",shortName:"Mal"},{id:40,aliases:["matth\xE4us","matthaeus","mtt"],longName:"Matth\xE4us",shortName:"Mat"},{id:41,aliases:["markus"],longName:"Markus",shortName:"Mar"},{id:42,aliases:["lukas"],longName:"Lukas",shortName:"Luk"},{id:43,aliases:["johannes"],longName:"Johannes",shortName:"Joh"},{id:44,aliases:["apostelgeschichte","apg"],longName:"Apostelgeschichte",shortName:"Apg"},{id:45,aliases:["r\xF6mer","roemer"],longName:"R\xF6mer",shortName:"R\xF6"},{id:46,prefix:"1",aliases:["korinther"],longName:"1. Korinther",shortName:"1Ko"},{id:47,prefix:"2",aliases:["korinther"],longName:"2. Korinther",shortName:"2Ko"},{id:48,aliases:["galater"],longName:"Galater",shortName:"Gal"},{id:49,aliases:["epheser"],longName:"Epheser",shortName:"Eph"},{id:50,aliases:["philipper"],longName:"Philipper",shortName:"Phil"},{id:51,aliases:["kolosser"],longName:"Kolosser",shortName:"Kol"},{id:52,prefix:"1",aliases:["thessalonicher"],longName:"1. Thessalonicher",shortName:"1Th"},{id:53,prefix:"2",aliases:["thessalonicher"],longName:"2. Thessalonicher",shortName:"2Th"},{id:54,prefix:"1",aliases:["timotheus"],longName:"1. Timotheus",shortName:"1Ti"},{id:55,prefix:"2",aliases:["timotheus"],longName:"2. Timotheus",shortName:"2Ti"},{id:56,aliases:["titus"],longName:"Titus",shortName:"Tit"},{id:57,aliases:["philemon","phlm","phm"],longName:"Philemon",shortName:"Phm"},{id:58,aliases:["hebr\xE4er","hebraeer"],longName:"Hebr\xE4er",shortName:"Heb"},{id:59,aliases:["jakobus"],longName:"Jakobus",shortName:"Jak"},{id:60,prefix:"1",aliases:["petrus"],longName:"1. Petrus",shortName:"1Pe"},{id:61,prefix:"2",aliases:["petrus"],longName:"2. Petrus",shortName:"2Pe"},{id:62,prefix:"1",aliases:["johannes"],longName:"1. Johannes",shortName:"1Jo"},{id:63,prefix:"2",aliases:["johannes"],longName:"2. Johannes",shortName:"2Jo"},{id:64,prefix:"3",aliases:["johannes"],longName:"3. Johannes",shortName:"3Jo"},{id:65,aliases:["judas"],longName:"Judas",shortName:"Jud"},{id:66,aliases:["offenbarung","offb"],longName:"Offenbarung",shortName:"Off"}];var V=[{id:1,aliases:["genesis"],longName:"Genesis",shortName:"Ge"},{id:2,aliases:["exodus"],longName:"Exodus",shortName:"Ex"},{id:3,aliases:["leviticus"],longName:"Leviticus",shortName:"Le"},{id:4,aliases:["numbers"],longName:"Numbers",shortName:"Nu"},{id:5,aliases:["deuteronomy"],longName:"Deuteronomy",shortName:"De"},{id:6,aliases:["joshua"],longName:"Joshua",shortName:"Jos"},{id:7,aliases:["judges","jg"],longName:"Judges",shortName:"Jg"},{id:8,aliases:["ruth"],longName:"Ruth",shortName:"Ru"},{id:9,prefix:"1",aliases:["samuel"],longName:"1 Samuel",shortName:"1Sa"},{id:10,prefix:"2",aliases:["samuel"],longName:"2 Samuel",shortName:"2Sa"},{id:11,prefix:"1",aliases:["kings"],longName:"1 Kings",shortName:"1Ki"},{id:12,prefix:"2",aliases:["kings"],longName:"2 Kings",shortName:"2Ki"},{id:13,prefix:"1",aliases:["chronicles"],longName:"1 Chronicles",shortName:"1Ch"},{id:14,prefix:"2",aliases:["chronicles"],longName:"2 Chronicles",shortName:"2Ch"},{id:15,aliases:["ezra"],longName:"Ezra",shortName:"Ezr"},{id:16,aliases:["nehemiah"],longName:"Nehemiah",shortName:"Ne"},{id:17,aliases:["esther"],longName:"Esther",shortName:"Es"},{id:18,aliases:["job"],longName:"Job",shortName:"Job"},{id:19,aliases:["psalms"],longName:"Psalms",shortName:"Ps"},{id:20,aliases:["proverbs"],longName:"Proverbs",shortName:"Pr"},{id:21,aliases:["ecclesiastes"],longName:"Ecclesiastes",shortName:"Ec"},{id:22,aliases:["can","songofsolomon","songofsongs"],longName:"Song of Solomon",shortName:"Ca"},{id:23,aliases:["isaiah"],longName:"Isaiah",shortName:"Isa"},{id:24,aliases:["jeremiah"],longName:"Jeremiah",shortName:"Jer"},{id:25,aliases:["lamentations"],longName:"Lamentations",shortName:"La"},{id:26,aliases:["ezekiel"],longName:"Ezekiel",shortName:"Eze"},{id:27,aliases:["daniel"],longName:"Daniel",shortName:"Da"},{id:28,aliases:["hosea"],longName:"Hosea",shortName:"Ho"},{id:29,aliases:["joel"],longName:"Joel",shortName:"Joe"},{id:30,aliases:["amos"],longName:"Amos",shortName:"Am"},{id:31,aliases:["obadiah"],longName:"Obadiah",shortName:"Ob"},{id:32,aliases:["jonah","jnh"],longName:"Jonah",shortName:"Jon"},{id:33,aliases:["micah"],longName:"Micah",shortName:"Mic"},{id:34,aliases:["nahum"],longName:"Nahum",shortName:"Na"},{id:35,aliases:["habakkuk"],longName:"Habakkuk",shortName:"Hab"},{id:36,aliases:["zephaniah"],longName:"Zephaniah",shortName:"Zep"},{id:37,aliases:["haggai"],longName:"Haggai",shortName:"Hag"},{id:38,aliases:["zechariah"],longName:"Zechariah",shortName:"Zec"},{id:39,aliases:["malachi"],longName:"Malachi",shortName:"Mal"},{id:40,aliases:["matthew","mt"],longName:"Matthew",shortName:"Mt"},{id:41,aliases:["mark","mr"],longName:"Mark",shortName:"Mr"},{id:42,aliases:["luke"],longName:"Luke",shortName:"Lu"},{id:43,aliases:["john"],longName:"John",shortName:"Joh"},{id:44,aliases:["acts"],longName:"Acts",shortName:"Ac"},{id:45,aliases:["romans"],longName:"Romans",shortName:"Ro"},{id:46,prefix:"1",aliases:["corinthians"],longName:"1 Corinthians",shortName:"1Co"},{id:47,prefix:"2",aliases:["corinthians"],longName:"2 Corinthians",shortName:"2Co"},{id:48,aliases:["galatians"],longName:"Galatians",shortName:"Ga"},{id:49,aliases:["ephesians"],longName:"Ephesians",shortName:"Eph"},{id:50,aliases:["philippians","php"],longName:"Philippians",shortName:"Php"},{id:51,aliases:["colossians"],longName:"Colossians",shortName:"Col"},{id:52,prefix:"1",aliases:["thessalonians"],longName:"1 Thessalonians",shortName:"1Th"},{id:53,prefix:"2",aliases:["thessalonians"],longName:"2 Thessalonians",shortName:"2Th"},{id:54,prefix:"1",aliases:["timothy"],longName:"1 Timothy",shortName:"1Ti"},{id:55,prefix:"2",aliases:["timothy"],longName:"2 Timothy",shortName:"2Ti"},{id:56,aliases:["titus"],longName:"Titus",shortName:"Tit"},{id:57,aliases:["philemon","phm"],longName:"Philemon",shortName:"Phm"},{id:58,aliases:["hebrews"],longName:"Hebrews",shortName:"Heb"},{id:59,aliases:["james","jas"],longName:"James",shortName:"Jas"},{id:60,prefix:"1",aliases:["peter"],longName:"1 Peter",shortName:"1Pe"},{id:61,prefix:"2",aliases:["peter"],longName:"2 Peter",shortName:"2Pe"},{id:62,prefix:"1",aliases:["john"],longName:"1 John",shortName:"1Jo"},{id:63,prefix:"2",aliases:["john"],longName:"2 John",shortName:"2Jo"},{id:64,prefix:"3",aliases:["john"],longName:"3 John",shortName:"3Jo"},{id:65,aliases:["jude"],longName:"Jude",shortName:"Jude"},{id:66,aliases:["revelation"],longName:"Revelation",shortName:"Re"}];var M=require("obsidian");var I={settings:{language:{name:"Language",description:"Select the language for Bible references"},useShortNames:{name:"Use short names in Bible links",description:'When enabled, Bible references will use abbreviated book names (e.g., "1Pe" instead of "1. Peter")'}},commands:{replaceLinks:"Convert all links",replaceBibleLinks:"Convert Bible verse links",replacePublicationLinks:"Convert publication links",convertBibleReference:"Convert Bible reference to Library link"},notices:{multipleBooksFound:"Multiple Bible books found: {{books}}"},suggestions:{createLink:"Create link: {{text}}",createLinks:"Create links: {{text}}",createAndOpen:"Create link and open: {{text}}",createAndOpenVerse:"Create link and open: {{verse}}",typing:"Enter Bible reference: {{text}}",typingEmpty:"Enter Bible reference"},errors:{multipleBooksFound:"Multiple Bible books found: {{books}}",bookNotFound:"Bible book not found: {{book}}",invalidVerseNumber:"Invalid verse number",versesAscendingOrder:"Verses must be in ascending order",invalidVerseFormat:"Invalid verse format",invalidReferenceFormat:"Invalid reference format",conversionError:"Error converting Bible text: {{message}}",unsupportedLanguage:"Unsupported language: {{language}}"}};var P={settings:{language:{name:"Sprache",description:"W\xE4hle die Sprache f\xFCr die Bibelverweise"},useShortNames:{name:"Kurznamen in Bibelverweisen verwenden",description:'Wenn aktiviert, werden Bibelverweise mit abgek\xFCrzten Buchnamen angezeigt (z.B. "1Pe" statt "1. Petrus")'}},commands:{replaceLinks:"Alle Links umwandeln",replaceBibleLinks:"Bibelvers-Links umwandeln",replacePublicationLinks:"Publikations-Links umwandeln",convertBibleReference:"Bibelverweis in JW Library-Link umwandeln"},notices:{multipleBooksFound:"Mehrere Bibelb\xFCcher gefunden: {{books}}"},suggestions:{createLink:"Link erstellen: {{text}}",createLinks:"Links erstellen: {{text}}",createAndOpen:"Link erstellen und \xF6ffnen: {{text}}",createAndOpenVerse:"Link erstellen und \xF6ffnen: {{verse}}",typing:"Bibelverweis eingeben: {{text}}",typingEmpty:"Bibelverweis eingeben"},errors:{multipleBooksFound:"Mehrere Bibelb\xFCcher gefunden: {{books}}",bookNotFound:"Bibelbuch nicht gefunden: {{book}}",invalidVerseNumber:"Ung\xFCltige Versnummer",versesAscendingOrder:"Verse m\xFCssen in aufsteigender Reihenfolge sein",invalidVerseFormat:"Ung\xFCltiges Versformat",invalidReferenceFormat:"Ung\xFCltiges Referenzformat",conversionError:"Fehler beim Konvertieren des Bibeltextes: {{message}}",unsupportedLanguage:"Nicht unterst\xFCtzte Sprache: {{language}}"}};var g=class t{constructor(){this.currentLocale="en";this.translations={en:I,de:P};try{if(typeof window!="undefined"&&window.localStorage){let n=window.localStorage.getItem("language");(n==="en"||n==="de")&&(this.currentLocale=n)}}catch(n){console.debug("Could not access localStorage, using default locale")}}static getInstance(){return t.instance||(t.instance=new t),t.instance}setLocale(n){this.currentLocale=n}getCurrentLocale(){return this.currentLocale}t(n,s={}){let e=n.split("."),a=this.translations[this.currentLocale];for(let i of e)if(a&&typeof a=="object"&&i in a)a=a[i];else return console.warn(`Translation key not found: ${n}`),n;return typeof a=="string"?this.replaceVariables(a,s):n}replaceVariables(n,s){return n.replace(/\{\{(\w+)\}\}/g,(e,a)=>s[a]||e)}};var x=t=>{let n=g.getInstance().t.bind(g.getInstance());switch(t){case"E":return V;case"X":return j;default:return new M.Notice(n("errors.unsupportedLanguage",{language:t})),null}};var A=(t,n)=>{let s=g.getInstance().t.bind(g.getInstance());t=t.toLowerCase().replace(/[/.\s]/g,"").trim();let e=x(n);if(!e)return{book:null};let a=e.filter(i=>i.prefix?t.match(/^[1-5]/):!0).filter(i=>i.aliases.map(o=>i.prefix?`${i.prefix}${o}`:o).some(o=>o.includes(t)));return a.length>1?{book:null,notification:s("errors.multipleBooksFound",{books:a.map(i=>i.longName).join(", ")})}:a.length===1?{book:a[0]}:{book:null,notification:s("errors.bookNotFound")}};function v(t){let n=parseInt(t,10);if(isNaN(n)||n<1)throw new Error("errors.invalidVerseFormat");return n}function u(t){return t.toString().padStart(3,"0")}function Z(t){t=t.trim(),t.endsWith(",")&&(t=t.slice(0,-1));let n=t.split(",").map(i=>i.trim()).filter(i=>i.length>0);if(n.length!==t.split(",").length)throw new Error("errors.invalidVerseFormat");let s=[],e=0,a=null;for(let i of n){if((i.match(/-/g)||[]).length>1||i.includes("--"))throw new Error("errors.invalidVerseFormat");if(i.includes("-")){let r=v(i.split("-")[0]),o=v(i.split("-")[1]);if(r>=o)throw new Error("errors.versesAscendingOrder");if(r<=e)throw new Error("errors.versesAscendingOrder");a&&r===e+1?a.end=u(o):(a={start:u(r),end:u(o)},s.push(a)),e=o}else{let r=v(i);if(r<=e)throw new Error("errors.versesAscendingOrder");a&&r===e+1?a.end=u(r):(a={start:u(r),end:u(r)},s.push(a)),e=r}}return{ranges:s}}function b(t,n){t=t.trim().toLowerCase();let s=t.match(/^([a-z0-9äöüß]+?)\s*(\d+)\s*:\s*(.+)$/i);if(!s)throw new Error("errors.invalidFormat");let[,e,a,i]=s,r=A(e,n);if(!r.book)throw new Error("errors.bookNotFound");let o=r.book,l=o.id<10?`0${o.id}`:o.id.toString(),m=a.padStart(3,"0"),p=i.match(/^(\d+)(?:-(\d*))?$/);if(p){let[,h,c]=p,N=v(h);if(c){let k=v(c);if(N>=k)throw new Error("errors.versesAscendingOrder");return{book:l,chapter:m,verseRanges:[{start:u(N),end:u(k)}]}}return{book:l,chapter:m,verseRanges:[{start:u(N),end:u(N)}]}}let d=Z(i);if(d.error||!d.ranges)throw new Error(d.error);return{book:l,chapter:m,verseRanges:d.ranges}}var H=require("obsidian");function B(t,n){let s=g.getInstance().t.bind(g.getInstance()),{book:e,chapter:a,verseRanges:i}=t;if(!i)return new H.Notice(s("errors.invalidReferenceFormat")),"";let r=o=>`jwlibrary:///finder?bible=${o}${n?`&wtlocale=${n}`:""}`;if(i.length===1){let{start:o,end:l}=i[0],m=`${e}${a}${o}`;return r(o===l?m:`${m}-${e}${a}${l}`)}return i.map(({start:o,end:l})=>{let m=`${e}${a}${o}`;return r(o===l?m:`${m}-${e}${a}${l}`)})}function S(t,n=!1,s){var o;let e=b(t,s);if(!e)return t;let a=(o=x(s))==null?void 0:o.find(l=>l.id===parseInt(e.book));if(!a)return t;let i=n?a.shortName:a.longName,r=e.verseRanges.map(l=>{let m=parseInt(l.start),p=parseInt(l.end);return m===p?m.toString():`${m}-${p}`});return`${i} ${parseInt(e.chapter)}:${r.join(",")}`}function F(t,n){try{let s=b(t,n);return s?B(s,n):t}catch(s){return t}}function y(t,n=!1,s){var e;try{let a=b(t,s);if(!a)return t;let i=a,r=B(i,s);if(!r||Array.isArray(r)&&!r.length)return t;if(Array.isArray(r)){let l=(e=x(s))==null?void 0:e.find(h=>h.id===parseInt(i.book));if(!l)return t;let m=n?l.shortName:l.longName,p=parseInt(i.chapter);return i.verseRanges.map(h=>{let c=parseInt(h.start),N=parseInt(h.end);return c===N?c.toString():`${c}-${N}`}).map((h,c)=>c===0?`[${m} ${p}:${h}](${r[c]})`:`[${h}](${r[c]})`).join(",")}return`[${S(t,n,s)}](${r})`}catch(a){return console.error(a),t}}var U=/^(?:[1-5]?[A-Za-zäöü]{2,24}\s*\d+:\d+(?:-\d+)?(?:\s*,\s*\d+(?:-\d+)?)*\s*,?\s*)?$/i,q={useShortNames:!1,language:"E"},E=class extends f.EditorSuggest{constructor(s){super(s.app);this.t=g.getInstance().t.bind(g.getInstance());this.plugin=s}onTrigger(s,e){let i=e.getLine(s.line).substring(0,s.ch),r=i.lastIndexOf("/b");if(r===-1)return null;let o=i.slice(r+2);return o.startsWith(" ")||o.length>0?{start:{ch:r,line:s.line},end:s,query:o.trim()}:null}getSuggestions(s){let e=s.query,a=/^([a-z0-9äöüß]+?)\s*(\d+)\s*:\s*(\d+)/i;if(e.length===0)return[{text:e,command:"link",description:this.t("suggestions.typingEmpty")}];if(e.match(a)){let i=null;try{i=b(e,this.plugin.settings.language)}catch(p){return[{text:e,command:"typing",description:this.t("suggestions.typing",{text:e})}]}if(!i)return[];let r=S(e,this.plugin.settings.useShortNames,this.plugin.settings.language),o=B(i,this.plugin.settings.language),l=Array.isArray(o)&&o.length>1,m=[{text:e,command:"link",description:l?this.t("suggestions.createLinks",{text:r}):this.t("suggestions.createLink",{text:r})}];return l?i.verseRanges.map(d=>{let h=parseInt(d.start),c=parseInt(d.end);return h===c?h.toString():`${h}-${c}`}).forEach((d,h)=>{m.push({text:e,command:"open",description:this.t("suggestions.createAndOpenVerse",{verse:d}),linkIndex:h})}):m.push({text:e,command:"open",description:this.t("suggestions.createAndOpen",{text:r})}),m}else return[{text:e,command:"typing",description:this.t("suggestions.typing",{text:e})}]}renderSuggestion(s,e){e.setText(s.description)}selectSuggestion(s){if(!this.context)return;let{context:e}=this,a=e.editor,i=y(s.text,this.plugin.settings.useShortNames,this.plugin.settings.language);if(s.command!=="typing"&&(a.replaceRange(i,e.start,e.end),s.command==="open")){let r=F(s.text,this.plugin.settings.language);Array.isArray(r)?window.open(r[s.linkIndex||0]):window.open(r)}}},w=class extends f.Plugin{constructor(){super(...arguments);this.t=g.getInstance().t.bind(g.getInstance())}async onload(){await this.loadSettings(),this.addSettingTab(new $(this.app,this)),this.addCommand({id:"replace-links",name:this.t("commands.replaceLinks"),editorCallback:s=>{let e=s.getValue(),a=L(e,"all");e!==a&&s.setValue(a)}}),this.addCommand({id:"replace-bible-links",name:this.t("commands.replaceBibleLinks"),editorCallback:s=>{let e=s.getValue(),a=L(e,"bible");e!==a&&s.setValue(a)}}),this.addCommand({id:"replace-publication-links",name:this.t("commands.replacePublicationLinks"),editorCallback:s=>{let e=s.getValue(),a=L(e,"publication");e!==a&&s.setValue(a)}}),this.addCommand({id:"convert-bible-text",name:this.t("commands.convertBibleReference"),editorCallback:s=>{let e=s.getSelection();if(e){let a=y(e,this.settings.useShortNames,this.settings.language);s.replaceSelection(a)}}}),this.bibleSuggester=new E(this),this.registerEditorSuggest(this.bibleSuggester)}onunload(){}async loadSettings(){this.settings=Object.assign({},q,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},$=class extends f.PluginSettingTab{constructor(s,e){super(s,e);this.t=g.getInstance().t.bind(g.getInstance());this.plugin=e}display(){let{containerEl:s}=this;s.empty(),new f.Setting(s).setName(this.t("settings.language.name")).setDesc(this.t("settings.language.description")).addDropdown(e=>e.addOptions({E:"English",X:"Deutsch"}).setValue(this.plugin.settings.language).onChange(async a=>{this.plugin.settings.language=a,await this.plugin.saveSettings(),this.display()})),new f.Setting(s).setName(this.t("settings.useShortNames.name")).setDesc(this.t("settings.useShortNames.description")).addToggle(e=>e.setValue(this.plugin.settings.useShortNames).onChange(async a=>{this.plugin.settings.useShortNames=a,await this.plugin.saveSettings()}))}};
