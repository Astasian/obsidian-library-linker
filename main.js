/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LibraryLinkerPlugin,
  matchingBibleReferenceRegex: () => matchingBibleReferenceRegex
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/utils/convertBibleReference.ts
function convertBibleReference(url) {
  url = url.replace("jwpub://", "jwlibrary://");
  const parts = url.split("/");
  const bibleRef = parts[parts.length - 1];
  const [startBookChapterVerse, endBookChapterVerse] = bibleRef.split("-");
  const [bookStart, chapterStart, verseStart] = startBookChapterVerse.split(":");
  const [bookEnd, chapterEnd, verseEnd] = endBookChapterVerse.split(":");
  const formattedChapterStart = chapterStart.padStart(3, "0");
  const formattedVerseStart = verseStart.padStart(3, "0");
  const formattedChapterEnd = chapterEnd.padStart(3, "0");
  const formattedVerseEnd = verseEnd.padStart(3, "0");
  const formattedReferenceStart = `${bookStart}${formattedChapterStart}${formattedVerseStart}`;
  const formattedReferenceEnd = `${bookEnd}${formattedChapterEnd}${formattedVerseEnd}`;
  const formattedReference = formattedReferenceStart === formattedReferenceEnd ? formattedReferenceStart : `${formattedReferenceStart}-${formattedReferenceEnd}`;
  return `jwlibrary:///finder?bible=${formattedReference}`;
}

// src/utils/convertPublicationReference.ts
function convertPublicationReference(url) {
  const parts = url.split("/");
  const pubRef = parts[3];
  const [locale, docId] = pubRef.split(":");
  const paragraph = parts[4];
  return `jwlibrary:///finder?wtlocale=${locale}&docid=${docId}&par=${paragraph}`;
}

// src/utils/convertLinks.ts
function convertLinks(content, type = "all") {
  const wikiLinkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
  return content.replace(wikiLinkRegex, (match, text, url) => {
    if (url.startsWith("jwpub://b/") && (type === "bible" || type === "all")) {
      return `[${text}](${convertBibleReference(url)})`;
    }
    if (url.startsWith("jwpub://p/") && (type === "publication" || type === "all")) {
      return `[${text}](${convertPublicationReference(url)})`;
    }
    return match;
  });
}

// src/bibleBooks.ts
var bibleBooksDE = [
  {
    id: 1,
    aliases: ["1mo", "1.mo", "1mose", "1.mose"],
    longName: "1. Mose",
    shortName: "1Mo"
  },
  {
    id: 2,
    aliases: ["2mo", "2.mo", "2mose", "2.mose"],
    longName: "2. Mose",
    shortName: "2Mo"
  },
  {
    id: 3,
    aliases: ["3mo", "3.mo", "3mose", "3.mose"],
    longName: "3. Mose",
    shortName: "3Mo"
  },
  {
    id: 4,
    aliases: ["4mo", "4.mo", "4mose", "4.mose"],
    longName: "4. Mose",
    shortName: "4Mo"
  },
  {
    id: 5,
    aliases: ["5mo", "5.mo", "5mose", "5.mose"],
    longName: "5. Mose",
    shortName: "5Mo"
  },
  {
    id: 6,
    aliases: ["jos", "josua"],
    longName: "Josua",
    shortName: "Jos"
  },
  {
    id: 7,
    aliases: ["ri", "richt", "richter"],
    longName: "Richter",
    shortName: "Ri"
  },
  {
    id: 8,
    aliases: ["ru", "rut", "ruth"],
    longName: "Ruth",
    shortName: "Ru"
  },
  {
    id: 9,
    aliases: ["1sam", "1.sam", "1samuel", "1.samuel"],
    longName: "1. Samuel",
    shortName: "1Sam"
  },
  {
    id: 10,
    aliases: ["2sam", "2.sam", "2samuel", "2.samuel"],
    longName: "2. Samuel",
    shortName: "2Sam"
  },
  {
    id: 11,
    aliases: ["1k\xF6", "1.k\xF6", "1k\xF6n", "1.k\xF6n", "1k\xF6nige", "1.k\xF6nige"],
    longName: "1. K\xF6nige",
    shortName: "1K\xF6"
  },
  {
    id: 12,
    aliases: ["2k\xF6", "2.k\xF6", "2k\xF6n", "2.k\xF6n", "2k\xF6nige", "2.k\xF6nige"],
    longName: "2. K\xF6nige",
    shortName: "2K\xF6"
  },
  {
    id: 13,
    aliases: [
      "1chr",
      "1.chr",
      "1chron",
      "1.chron",
      "1chronik",
      "1.chronik",
      "1chronika",
      "1.chronika"
    ],
    longName: "1. Chronika",
    shortName: "1Chr"
  },
  {
    id: 14,
    aliases: [
      "2chr",
      "2.chr",
      "2chron",
      "2.chron",
      "2chronik",
      "2.chronik",
      "2chronika",
      "2.chronika"
    ],
    longName: "2. Chronika",
    shortName: "2Chr"
  },
  {
    id: 15,
    aliases: ["esr", "esra"],
    longName: "Esra",
    shortName: "Esr"
  },
  {
    id: 16,
    aliases: ["neh", "nehem", "nehemia"],
    longName: "Nehemia",
    shortName: "Neh"
  },
  {
    id: 17,
    aliases: ["est", "esth", "ester", "esther"],
    longName: "Esther",
    shortName: "Esth"
  },
  {
    id: 18,
    aliases: ["hi", "hiob"],
    longName: "Hiob",
    shortName: "Hi"
  },
  {
    id: 19,
    aliases: ["ps", "psa", "psalm", "psalmen"],
    longName: "Psalm",
    shortName: "Ps"
  },
  {
    id: 20,
    aliases: ["spr", "spr\xFC", "sprue", "spr\xFCche"],
    longName: "Spr\xFCche",
    shortName: "Spr"
  },
  {
    id: 21,
    aliases: ["pred", "prediger"],
    longName: "Prediger",
    shortName: "Pred"
  },
  {
    id: 22,
    aliases: ["hoh", "hl", "hoheslied", "hohes lied"],
    longName: "Hohes Lied",
    shortName: "Hoh"
  },
  {
    id: 23,
    aliases: ["jes", "jesaja"],
    longName: "Jesaja",
    shortName: "Jes"
  },
  {
    id: 24,
    aliases: ["jer", "jeremia"],
    longName: "Jeremia",
    shortName: "Jer"
  },
  {
    id: 25,
    aliases: ["klag", "klg", "klgl", "klagelieder"],
    longName: "Klagelieder",
    shortName: "Klg"
  },
  {
    id: 26,
    aliases: ["hes", "hesekiel"],
    longName: "Hesekiel",
    shortName: "Hes"
  },
  {
    id: 27,
    aliases: ["dan", "daniel"],
    longName: "Daniel",
    shortName: "Dan"
  },
  {
    id: 28,
    aliases: ["hos", "hosea"],
    longName: "Hosea",
    shortName: "Hos"
  },
  {
    id: 29,
    aliases: ["joe", "joel"],
    longName: "Joel",
    shortName: "Joel"
  },
  {
    id: 30,
    aliases: ["am", "amos"],
    longName: "Amos",
    shortName: "Am"
  },
  {
    id: 31,
    aliases: ["ob", "obd", "obadja"],
    longName: "Obadja",
    shortName: "Ob"
  },
  {
    id: 32,
    aliases: ["jon", "jona"],
    longName: "Jona",
    shortName: "Jon"
  },
  {
    id: 33,
    aliases: ["mi", "micha"],
    longName: "Micha",
    shortName: "Mi"
  },
  {
    id: 34,
    aliases: ["nah", "nahum"],
    longName: "Nahum",
    shortName: "Nah"
  },
  {
    id: 35,
    aliases: ["hab", "habakuk"],
    longName: "Habakuk",
    shortName: "Hab"
  },
  {
    id: 36,
    aliases: ["zeph", "zefanja", "zephanja"],
    longName: "Zephanja",
    shortName: "Zeph"
  },
  {
    id: 37,
    aliases: ["hag", "haggai"],
    longName: "Haggai",
    shortName: "Hag"
  },
  {
    id: 38,
    aliases: ["sach", "sacharja"],
    longName: "Sacharja",
    shortName: "Sach"
  },
  {
    id: 39,
    aliases: ["mal", "maleachi"],
    longName: "Maleachi",
    shortName: "Mal"
  },
  {
    id: 40,
    aliases: ["mt", "mat", "matt", "matth", "matth\xE4us"],
    longName: "Matth\xE4us",
    shortName: "Mat"
  },
  {
    id: 41,
    aliases: ["mar", "markus"],
    longName: "Markus",
    shortName: "Mar"
  },
  {
    id: 42,
    aliases: ["lk", "luk", "lukas"],
    longName: "Lukas",
    shortName: "Luk"
  },
  {
    id: 43,
    aliases: ["joh", "johannes"],
    longName: "Johannes",
    shortName: "Joh"
  },
  {
    id: 44,
    aliases: ["apg", "apostelgeschichte"],
    longName: "Apostelgeschichte",
    shortName: "Apg"
  },
  {
    id: 45,
    aliases: ["r\xF6m", "r\xF6mer"],
    longName: "R\xF6mer",
    shortName: "R\xF6m"
  },
  {
    id: 46,
    aliases: ["1kor", "1.kor", "1korinther", "1.korinther"],
    longName: "1. Korinther",
    shortName: "1Kor"
  },
  {
    id: 47,
    aliases: ["2kor", "2.kor", "2korinther", "2.korinther"],
    longName: "2. Korinther",
    shortName: "2Kor"
  },
  {
    id: 48,
    aliases: ["gal", "galater"],
    longName: "Galater",
    shortName: "Gal"
  },
  {
    id: 49,
    aliases: ["eph", "epheser"],
    longName: "Epheser",
    shortName: "Eph"
  },
  {
    id: 50,
    aliases: ["phil", "philipper"],
    longName: "Philipper",
    shortName: "Phil"
  },
  {
    id: 51,
    aliases: ["kol", "kolosser"],
    longName: "Kolosser",
    shortName: "Kol"
  },
  {
    id: 52,
    aliases: ["1th", "1.th", "1thes", "1.thes", "1thessalonicher", "1.thessalonicher"],
    longName: "1. Thessalonicher",
    shortName: "1Th"
  },
  {
    id: 53,
    aliases: ["2th", "2.th", "2thes", "2.thes", "2thessalonicher", "2.thessalonicher"],
    longName: "2. Thessalonicher",
    shortName: "2Th"
  },
  {
    id: 54,
    aliases: ["1tim", "1.tim", "1timotheus", "1.timotheus"],
    longName: "1. Timotheus",
    shortName: "1Tim"
  },
  {
    id: 55,
    aliases: ["2tim", "2.tim", "2timotheus", "2.timotheus"],
    longName: "2. Timotheus",
    shortName: "2Tim"
  },
  {
    id: 56,
    aliases: ["tit", "titus"],
    longName: "Titus",
    shortName: "Tit"
  },
  {
    id: 57,
    aliases: ["phm", "phlm", "philemon"],
    longName: "Philemon",
    shortName: "Phm"
  },
  {
    id: 58,
    aliases: ["hebr", "heb", "hebr\xE4er"],
    longName: "Hebr\xE4er",
    shortName: "Hebr"
  },
  {
    id: 59,
    aliases: ["jak", "jakobus"],
    longName: "Jakobus",
    shortName: "Jak"
  },
  {
    id: 60,
    aliases: ["1pe", "1.pe", "1pet", "1.pet", "1petrus", "1.petrus"],
    longName: "1. Petrus",
    shortName: "1Pe"
  },
  {
    id: 61,
    aliases: ["2pe", "2.pe", "2pet", "2.pet", "2petrus", "2.petrus"],
    longName: "2. Petrus",
    shortName: "2Pe"
  },
  {
    id: 62,
    aliases: ["1joh", "1.joh", "1johannes", "1.johannes"],
    longName: "1. Johannes",
    shortName: "1Joh"
  },
  {
    id: 63,
    aliases: ["2joh", "2.joh", "2johannes", "2.johannes"],
    longName: "2. Johannes",
    shortName: "2Joh"
  },
  {
    id: 64,
    aliases: ["3joh", "3.joh", "3johannes", "3.johannes"],
    longName: "3. Johannes",
    shortName: "3Joh"
  },
  {
    id: 65,
    aliases: ["jud", "judas"],
    longName: "Judas",
    shortName: "Jud"
  },
  {
    id: 66,
    aliases: ["off", "offb", "offenbarung", "offenb"],
    longName: "Offenbarung",
    shortName: "Off"
  }
];

// src/utils/findBookIndex.ts
function findBookIndex(bookQuery) {
  bookQuery = bookQuery.toLowerCase().trim();
  for (const book of bibleBooksDE) {
    if (book.aliases.includes(bookQuery)) {
      return book.id;
    }
  }
  return -1;
}

// src/utils/parseBibleReference.ts
function parseVerseNumber(verse) {
  const num = parseInt(verse, 10);
  if (isNaN(num) || num < 1) {
    throw new Error("Invalid verse number");
  }
  return num;
}
function padVerse(verse) {
  return verse.toString().padStart(3, "0");
}
function parseVerseRanges(versePart) {
  versePart = versePart.trim();
  if (versePart.endsWith(",")) {
    versePart = versePart.slice(0, -1);
  }
  const parts = versePart.split(",").map((p) => p.trim()).filter((p) => p.length > 0);
  if (parts.length !== versePart.split(",").length) {
    throw new Error("Invalid verse number");
  }
  const ranges = [];
  let lastEndVerse = 0;
  let currentRange = null;
  for (const part of parts) {
    if ((part.match(/-/g) || []).length > 1 || part.includes("--")) {
      throw new Error("Invalid verse number");
    }
    if (part.includes("-")) {
      const [start, end] = part.split("-").map((v) => {
        if (!v || v.startsWith("-")) {
          throw new Error("Invalid verse number");
        }
        return parseVerseNumber(v);
      });
      if (start >= end) {
        throw new Error("Verses must be in ascending order");
      }
      if (start <= lastEndVerse) {
        throw new Error("Verses must be in ascending order");
      }
      if (currentRange && start === lastEndVerse + 1) {
        currentRange.end = padVerse(end);
      } else {
        currentRange = {
          start: padVerse(start),
          end: padVerse(end)
        };
        ranges.push(currentRange);
      }
      lastEndVerse = end;
    } else {
      const verse = parseVerseNumber(part);
      if (verse <= lastEndVerse) {
        throw new Error("Verses must be in ascending order");
      }
      if (currentRange && verse === lastEndVerse + 1) {
        currentRange.end = padVerse(verse);
      } else {
        currentRange = {
          start: padVerse(verse),
          end: padVerse(verse)
        };
        ranges.push(currentRange);
      }
      lastEndVerse = verse;
    }
  }
  return ranges;
}
function parseBibleReference(input) {
  input = input.trim().toLowerCase();
  const match = input.match(/^([a-z0-9äöüß]+?)\s*(\d+)\s*:\s*(.+)$/i);
  if (!match) {
    throw new Error("Invalid format");
  }
  const [, bookName, chapter, versesPart] = match;
  const bookIndex = findBookIndex(bookName.trim());
  if (bookIndex === -1) {
    throw new Error("Book not found");
  }
  const paddedBook = bookIndex < 10 ? `0${bookIndex}` : bookIndex.toString();
  const paddedChapter = chapter.padStart(3, "0");
  const simpleMatch = versesPart.match(/^(\d+)(?:-(\d+))?$/);
  if (simpleMatch) {
    const [, verse, endVerse] = simpleMatch;
    if (endVerse && parseVerseNumber(verse) >= parseVerseNumber(endVerse)) {
      throw new Error("Verses must be in ascending order");
    }
    return {
      book: paddedBook,
      chapter: paddedChapter,
      verseRanges: [
        {
          start: padVerse(parseVerseNumber(verse)),
          end: endVerse ? padVerse(parseVerseNumber(endVerse)) : padVerse(parseVerseNumber(verse))
        }
      ]
    };
  }
  try {
    const verseRanges = parseVerseRanges(versesPart);
    return {
      book: paddedBook,
      chapter: paddedChapter,
      verseRanges
    };
  } catch (error) {
    if (error instanceof Error) {
      throw error;
    }
    throw new Error("Invalid format");
  }
}

// src/utils/formatJWLibraryLink.ts
function formatJWLibraryLink(reference) {
  const { book, chapter, verseRanges } = reference;
  if (!verseRanges) {
    throw new Error("Invalid reference format");
  }
  if (verseRanges.length === 1) {
    const { start, end } = verseRanges[0];
    const baseReference = `${book}${chapter}${start}`;
    return start === end ? `jwlibrary:///finder?bible=${baseReference}` : `jwlibrary:///finder?bible=${baseReference}-${book}${chapter}${end}`;
  }
  return verseRanges.map(({ start, end }) => {
    const baseReference = `${book}${chapter}${start}`;
    return start === end ? `jwlibrary:///finder?bible=${baseReference}` : `jwlibrary:///finder?bible=${baseReference}-${book}${chapter}${end}`;
  });
}

// src/utils/formatBibleText.ts
function formatBibleText(input, short = false) {
  try {
    const reference = parseBibleReference(input);
    const bookIndex = parseInt(reference.book) - 1;
    const bookEntry = bibleBooksDE[bookIndex];
    const bookName = short ? bookEntry.shortName : bookEntry.longName;
    const verseRefs = reference.verseRanges.map((range) => {
      const start = parseInt(range.start);
      const end = parseInt(range.end);
      return start === end ? start.toString() : `${start}-${end}`;
    });
    return `${bookName} ${parseInt(reference.chapter)}:${verseRefs.join(",")}`;
  } catch (error) {
    return input;
  }
}

// src/utils/convertBibleTextToLink.ts
function convertBibleTextToLink(input) {
  try {
    const reference = parseBibleReference(input);
    return formatJWLibraryLink(reference);
  } catch (error) {
    console.error("Error converting Bible text:", error.message);
    return input;
  }
}
function convertBibleTextToMarkdownLink(input, short = false) {
  try {
    const reference = parseBibleReference(input);
    const links = formatJWLibraryLink(reference);
    if (!links || Array.isArray(links) && !links.length) {
      return input;
    }
    if (Array.isArray(links)) {
      const bookEntry = bibleBooksDE.find((book) => book.id === parseInt(reference.book));
      if (!bookEntry) {
        return input;
      }
      const bookName = short ? bookEntry.shortName : bookEntry.longName;
      const chapter = parseInt(reference.chapter);
      const verseRanges = reference.verseRanges.map((range) => {
        const start = parseInt(range.start);
        const end = parseInt(range.end);
        return start === end ? start.toString() : `${start}-${end}`;
      });
      return verseRanges.map((range, i) => {
        if (i === 0) {
          return `[${bookName} ${chapter}:${range}](${links[i]})`;
        }
        return `[${range}](${links[i]})`;
      }).join(",");
    }
    const formattedText = formatBibleText(input, short);
    return `[${formattedText}](${links})`;
  } catch (error) {
    return input;
  }
}

// src/locale/en.ts
var en = {
  settings: {
    language: {
      name: "Language",
      description: "Select the language for the plugin interface and Bible references"
    },
    useShortNames: {
      name: "Use short names in Bible links",
      description: 'When enabled, Bible references will use abbreviated book names (e.g., "1Pe" instead of "1. Peter")'
    }
  },
  commands: {
    replaceLinks: "Convert all links",
    replaceBibleLinks: "Convert Bible verse links",
    replacePublicationLinks: "Convert publication links",
    convertBibleReference: "Convert Bible reference to Library link"
  },
  notices: {
    multipleBooksFound: "Multiple Bible books found: {{books}}"
  },
  suggestions: {
    createLink: "Create link: {{text}}",
    createLinks: "Create links: {{text}}",
    createAndOpen: "Create and open: {{text}}",
    createAndOpenVerse: "Create and open: {{verse}}"
  }
};

// src/locale/de.ts
var de = {
  settings: {
    language: {
      name: "Sprache",
      description: "W\xE4hle die Sprache f\xFCr die Plugin-Oberfl\xE4che und Bibelverweise"
    },
    useShortNames: {
      name: "Kurznamen in Bibelverweisen verwenden",
      description: 'Wenn aktiviert, werden Bibelverweise mit abgek\xFCrzten Buchnamen angezeigt (z.B. "1Pe" statt "1. Petrus")'
    }
  },
  commands: {
    replaceLinks: "Alle Links umwandeln",
    replaceBibleLinks: "Bibelvers-Links umwandeln",
    replacePublicationLinks: "Publikations-Links umwandeln",
    convertBibleReference: "Bibelstelle in JW Library-Link umwandeln"
  },
  notices: {
    multipleBooksFound: "Mehrere Bibelb\xFCcher gefunden: {{books}}"
  },
  suggestions: {
    createLink: "Link erstellen: {{text}}",
    createLinks: "Links erstellen: {{text}}",
    createAndOpen: "Erstellen und \xF6ffnen: {{text}}",
    createAndOpenVerse: "Erstellen und \xF6ffnen: {{verse}}"
  }
};

// src/services/TranslationService.ts
var TranslationService = class _TranslationService {
  constructor() {
    this.currentLanguage = "en";
    this.translations = {
      en,
      de
    };
  }
  static getInstance() {
    if (!_TranslationService.instance) {
      _TranslationService.instance = new _TranslationService();
    }
    return _TranslationService.instance;
  }
  setLanguage(language) {
    this.currentLanguage = language;
  }
  t(key, variables = {}) {
    const keys = key.split(".");
    let value = this.translations[this.currentLanguage];
    for (const k of keys) {
      if (value && typeof value === "object" && k in value) {
        value = value[k];
      } else {
        console.warn(`Translation key not found: ${key}`);
        return key;
      }
    }
    if (typeof value === "string") {
      return this.replaceVariables(value, variables);
    }
    return key;
  }
  replaceVariables(text, variables) {
    return text.replace(/\{\{(\w+)\}\}/g, (match, key) => {
      return variables[key] || match;
    });
  }
};

// src/main.ts
var matchingBibleReferenceRegex = /^(?:[1-5]?[A-Za-zäöü]{1,4}\s*\d+:\d+(?:-\d+)?(?:\s*,\s*\d+(?:-\d+)?)*\s*,?\s*)?$/i;
var DEFAULT_SETTINGS = {
  useShortNames: false,
  language: "en"
};
var BibleReferenceSuggester = class extends import_obsidian.EditorSuggest {
  constructor(plugin) {
    super(plugin.app);
    this.t = TranslationService.getInstance().t.bind(TranslationService.getInstance());
    this.plugin = plugin;
  }
  onTrigger(cursor, editor) {
    const line = editor.getLine(cursor.line);
    const subString = line.substring(0, cursor.ch);
    const commandIndex = subString.lastIndexOf("/b");
    if (commandIndex === -1) return null;
    const afterCommand = subString.slice(commandIndex + 2).trim();
    const match = afterCommand.match(matchingBibleReferenceRegex);
    if (!match) return null;
    return {
      start: {
        ch: commandIndex,
        // Start from the /b
        line: cursor.line
      },
      end: cursor,
      query: afterCommand
    };
  }
  getSuggestions(context) {
    const query = context.query;
    if (query.match(matchingBibleReferenceRegex)) {
      const formattedText = formatBibleText(query, true);
      let reference;
      try {
        reference = parseBibleReference(query);
      } catch (e) {
        return [];
      }
      const links = formatJWLibraryLink(reference);
      const hasMultipleLinks = Array.isArray(links) && links.length > 1;
      const suggestions = [
        {
          text: query,
          command: "link",
          description: hasMultipleLinks ? this.t("suggestions.createLinks", { text: formattedText }) : this.t("suggestions.createLink", { text: formattedText })
        }
      ];
      if (hasMultipleLinks) {
        const verseRanges = reference.verseRanges.map((range) => {
          const start = parseInt(range.start);
          const end = parseInt(range.end);
          return start === end ? start.toString() : `${start}-${end}`;
        });
        verseRanges.forEach((range, i) => {
          suggestions.push({
            text: query,
            command: "open",
            description: this.t("suggestions.createAndOpenVerse", { verse: range }),
            linkIndex: i
          });
        });
      } else {
        suggestions.push({
          text: query,
          command: "open",
          description: this.t("suggestions.createAndOpen", { text: formattedText })
        });
      }
      return suggestions;
    }
    return [];
  }
  renderSuggestion(suggestion, el) {
    el.setText(suggestion.description);
  }
  selectSuggestion(suggestion) {
    if (!this.context) return;
    const { context } = this;
    const editor = context.editor;
    const convertedLink = convertBibleTextToMarkdownLink(
      suggestion.text,
      this.plugin.settings.useShortNames
    );
    editor.replaceRange(convertedLink, context.start, context.end);
    if (suggestion.command === "open") {
      const url = convertBibleTextToLink(suggestion.text);
      if (Array.isArray(url)) {
        window.open(url[suggestion.linkIndex || 0]);
      } else {
        window.open(url);
      }
    }
  }
};
var LibraryLinkerPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.t = TranslationService.getInstance().t.bind(TranslationService.getInstance());
  }
  async onload() {
    await this.loadSettings();
    TranslationService.getInstance().setLanguage(this.settings.language);
    this.addCommand({
      id: "replace-links",
      name: this.t("commands.replaceLinks"),
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = convertLinks(currentContent, "all");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "replace-bible-links",
      name: this.t("commands.replaceBibleLinks"),
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = convertLinks(currentContent, "bible");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "replace-publication-links",
      name: this.t("commands.replacePublicationLinks"),
      editorCallback: (editor) => {
        const currentContent = editor.getValue();
        const updatedContent = convertLinks(currentContent, "publication");
        if (currentContent !== updatedContent) {
          editor.setValue(updatedContent);
        }
      }
    });
    this.addCommand({
      id: "convert-bible-text",
      name: this.t("commands.convertBibleReference"),
      editorCallback: (editor) => {
        const selection = editor.getSelection();
        if (selection) {
          const convertedLink = convertBibleTextToMarkdownLink(
            selection,
            this.settings.useShortNames
          );
          editor.replaceSelection(convertedLink);
        }
      }
    });
    this.addSettingTab(new LinkReplacerSettingTab(this.app, this));
    this.bibleSuggester = new BibleReferenceSuggester(this);
    this.registerEditorSuggest(this.bibleSuggester);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LinkReplacerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.t = TranslationService.getInstance().t.bind(TranslationService.getInstance());
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName(this.t("settings.language.name")).setDesc(this.t("settings.language.description")).addDropdown(
      (dropdown) => dropdown.addOptions({
        en: "English",
        de: "Deutsch"
      }).setValue(this.plugin.settings.language).onChange(async (value) => {
        this.plugin.settings.language = value;
        TranslationService.getInstance().setLanguage(value);
        await this.plugin.saveSettings();
        this.display();
      })
    );
    new import_obsidian.Setting(containerEl).setName(this.t("settings.useShortNames.name")).setDesc(this.t("settings.useShortNames.description")).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.useShortNames).onChange(async (value) => {
        this.plugin.settings.useShortNames = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3V0aWxzL2NvbnZlcnRCaWJsZVJlZmVyZW5jZS50cyIsICJzcmMvdXRpbHMvY29udmVydFB1YmxpY2F0aW9uUmVmZXJlbmNlLnRzIiwgInNyYy91dGlscy9jb252ZXJ0TGlua3MudHMiLCAic3JjL2JpYmxlQm9va3MudHMiLCAic3JjL3V0aWxzL2ZpbmRCb29rSW5kZXgudHMiLCAic3JjL3V0aWxzL3BhcnNlQmlibGVSZWZlcmVuY2UudHMiLCAic3JjL3V0aWxzL2Zvcm1hdEpXTGlicmFyeUxpbmsudHMiLCAic3JjL3V0aWxzL2Zvcm1hdEJpYmxlVGV4dC50cyIsICJzcmMvdXRpbHMvY29udmVydEJpYmxlVGV4dFRvTGluay50cyIsICJzcmMvbG9jYWxlL2VuLnRzIiwgInNyYy9sb2NhbGUvZGUudHMiLCAic3JjL3NlcnZpY2VzL1RyYW5zbGF0aW9uU2VydmljZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcbiAgQXBwLFxuICBFZGl0b3IsXG4gIEVkaXRvclBvc2l0aW9uLFxuICBFZGl0b3JTdWdnZXN0LFxuICBFZGl0b3JTdWdnZXN0Q29udGV4dCxcbiAgRWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvLFxuICBQbHVnaW4sXG4gIFBsdWdpblNldHRpbmdUYWIsXG4gIFNldHRpbmcsXG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGNvbnZlcnRMaW5rcyB9IGZyb20gJ0AvdXRpbHMvY29udmVydExpbmtzJztcbmltcG9ydCB7XG4gIGNvbnZlcnRCaWJsZVRleHRUb0xpbmssXG4gIGNvbnZlcnRCaWJsZVRleHRUb01hcmtkb3duTGluayxcbn0gZnJvbSAnQC91dGlscy9jb252ZXJ0QmlibGVUZXh0VG9MaW5rJztcbmltcG9ydCB0eXBlIHsgQmlibGVSZWZlcmVuY2UsIEJpYmxlU3VnZ2VzdGlvbiwgTGlua1JlcGxhY2VyU2V0dGluZ3MgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdEJpYmxlVGV4dCB9IGZyb20gJ0AvdXRpbHMvZm9ybWF0QmlibGVUZXh0JztcbmltcG9ydCB7IHBhcnNlQmlibGVSZWZlcmVuY2UgfSBmcm9tICdAL3V0aWxzL3BhcnNlQmlibGVSZWZlcmVuY2UnO1xuaW1wb3J0IHsgZm9ybWF0SldMaWJyYXJ5TGluayB9IGZyb20gJ0AvdXRpbHMvZm9ybWF0SldMaWJyYXJ5TGluayc7XG5pbXBvcnQgeyBUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL1RyYW5zbGF0aW9uU2VydmljZSc7XG5cbmV4cG9ydCBjb25zdCBtYXRjaGluZ0JpYmxlUmVmZXJlbmNlUmVnZXggPVxuICAvXig/OlsxLTVdP1tBLVphLXpcdTAwRTRcdTAwRjZcdTAwRkNdezEsNH1cXHMqXFxkKzpcXGQrKD86LVxcZCspPyg/OlxccyosXFxzKlxcZCsoPzotXFxkKyk/KSpcXHMqLD9cXHMqKT8kL2k7XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExpbmtSZXBsYWNlclNldHRpbmdzID0ge1xuICB1c2VTaG9ydE5hbWVzOiBmYWxzZSxcbiAgbGFuZ3VhZ2U6ICdlbicsXG59O1xuXG5jbGFzcyBCaWJsZVJlZmVyZW5jZVN1Z2dlc3RlciBleHRlbmRzIEVkaXRvclN1Z2dlc3Q8QmlibGVTdWdnZXN0aW9uPiB7XG4gIHBsdWdpbjogTGlicmFyeUxpbmtlclBsdWdpbjtcbiAgcHJpdmF0ZSB0ID0gVHJhbnNsYXRpb25TZXJ2aWNlLmdldEluc3RhbmNlKCkudC5iaW5kKFRyYW5zbGF0aW9uU2VydmljZS5nZXRJbnN0YW5jZSgpKTtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IExpYnJhcnlMaW5rZXJQbHVnaW4pIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uVHJpZ2dlcihjdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBlZGl0b3I6IEVkaXRvcik6IEVkaXRvclN1Z2dlc3RUcmlnZ2VySW5mbyB8IG51bGwge1xuICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3Qgc3ViU3RyaW5nID0gbGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcblxuICAgIC8vIEZpbmQgcG9zaXRpb24gb2YgL2JcbiAgICBjb25zdCBjb21tYW5kSW5kZXggPSBzdWJTdHJpbmcubGFzdEluZGV4T2YoJy9iJyk7XG4gICAgaWYgKGNvbW1hbmRJbmRleCA9PT0gLTEpIHJldHVybiBudWxsO1xuXG4gICAgLy8gR2V0IHRoZSB0ZXh0IGFmdGVyIC9iXG4gICAgY29uc3QgYWZ0ZXJDb21tYW5kID0gc3ViU3RyaW5nLnNsaWNlKGNvbW1hbmRJbmRleCArIDIpLnRyaW0oKTtcblxuICAgIC8vIE1hdGNoIHRoZSBCaWJsZSByZWZlcmVuY2VcbiAgICBjb25zdCBtYXRjaCA9IGFmdGVyQ29tbWFuZC5tYXRjaChtYXRjaGluZ0JpYmxlUmVmZXJlbmNlUmVnZXgpO1xuXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHtcbiAgICAgICAgY2g6IGNvbW1hbmRJbmRleCwgLy8gU3RhcnQgZnJvbSB0aGUgL2JcbiAgICAgICAgbGluZTogY3Vyc29yLmxpbmUsXG4gICAgICB9LFxuICAgICAgZW5kOiBjdXJzb3IsXG4gICAgICBxdWVyeTogYWZ0ZXJDb21tYW5kLFxuICAgIH07XG4gIH1cblxuICBnZXRTdWdnZXN0aW9ucyhjb250ZXh0OiBFZGl0b3JTdWdnZXN0Q29udGV4dCk6IEJpYmxlU3VnZ2VzdGlvbltdIHtcbiAgICBjb25zdCBxdWVyeSA9IGNvbnRleHQucXVlcnk7XG5cbiAgICAvLyBSZWdleCB0aGF0IGhhbmRsZXMgYm90aCB3aXRoIGFuZCB3aXRob3V0IHNwYWNlLCBpbmNsdWRpbmcgY29tcGxleCB2ZXJzZSByZWZlcmVuY2VzXG4gICAgaWYgKHF1ZXJ5Lm1hdGNoKG1hdGNoaW5nQmlibGVSZWZlcmVuY2VSZWdleCkpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSBmb3JtYXRCaWJsZVRleHQocXVlcnksIHRydWUpOyAvLyBVc2Ugc2hvcnQgZm9ybWF0XG5cbiAgICAgIGxldCByZWZlcmVuY2U6IEJpYmxlUmVmZXJlbmNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVmZXJlbmNlID0gcGFyc2VCaWJsZVJlZmVyZW5jZShxdWVyeSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW5rcyA9IGZvcm1hdEpXTGlicmFyeUxpbmsocmVmZXJlbmNlKTtcbiAgICAgIGNvbnN0IGhhc011bHRpcGxlTGlua3MgPSBBcnJheS5pc0FycmF5KGxpbmtzKSAmJiBsaW5rcy5sZW5ndGggPiAxO1xuXG4gICAgICBjb25zdCBzdWdnZXN0aW9uczogQmlibGVTdWdnZXN0aW9uW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiBxdWVyeSxcbiAgICAgICAgICBjb21tYW5kOiAnbGluaycsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGhhc011bHRpcGxlTGlua3NcbiAgICAgICAgICAgID8gdGhpcy50KCdzdWdnZXN0aW9ucy5jcmVhdGVMaW5rcycsIHsgdGV4dDogZm9ybWF0dGVkVGV4dCB9KVxuICAgICAgICAgICAgOiB0aGlzLnQoJ3N1Z2dlc3Rpb25zLmNyZWF0ZUxpbmsnLCB7IHRleHQ6IGZvcm1hdHRlZFRleHQgfSksXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgbGlua3MsIGFkZCBpbmRpdmlkdWFsIG9wZW4gb3B0aW9uc1xuICAgICAgaWYgKGhhc011bHRpcGxlTGlua3MpIHtcbiAgICAgICAgY29uc3QgdmVyc2VSYW5nZXMgPSByZWZlcmVuY2UudmVyc2VSYW5nZXMhLm1hcCgocmFuZ2UpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGFydCA9IHBhcnNlSW50KHJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZUludChyYW5nZS5lbmQpO1xuICAgICAgICAgIHJldHVybiBzdGFydCA9PT0gZW5kID8gc3RhcnQudG9TdHJpbmcoKSA6IGAke3N0YXJ0fS0ke2VuZH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICB2ZXJzZVJhbmdlcy5mb3JFYWNoKChyYW5nZSwgaSkgPT4ge1xuICAgICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgdGV4dDogcXVlcnksXG4gICAgICAgICAgICBjb21tYW5kOiAnb3BlbicsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50KCdzdWdnZXN0aW9ucy5jcmVhdGVBbmRPcGVuVmVyc2UnLCB7IHZlcnNlOiByYW5nZSB9KSxcbiAgICAgICAgICAgIGxpbmtJbmRleDogaSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0ZXh0OiBxdWVyeSxcbiAgICAgICAgICBjb21tYW5kOiAnb3BlbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudCgnc3VnZ2VzdGlvbnMuY3JlYXRlQW5kT3BlbicsIHsgdGV4dDogZm9ybWF0dGVkVGV4dCB9KSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdWdnZXN0aW9ucztcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcmVuZGVyU3VnZ2VzdGlvbihzdWdnZXN0aW9uOiBCaWJsZVN1Z2dlc3Rpb24sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGVsLnNldFRleHQoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbik7XG4gIH1cblxuICBzZWxlY3RTdWdnZXN0aW9uKHN1Z2dlc3Rpb246IEJpYmxlU3VnZ2VzdGlvbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250ZXh0KSByZXR1cm47XG5cbiAgICBjb25zdCB7IGNvbnRleHQgfSA9IHRoaXM7XG4gICAgY29uc3QgZWRpdG9yID0gY29udGV4dC5lZGl0b3I7XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBCaWJsZSByZWZlcmVuY2UgdG8gYSBsaW5rXG4gICAgY29uc3QgY29udmVydGVkTGluayA9IGNvbnZlcnRCaWJsZVRleHRUb01hcmtkb3duTGluayhcbiAgICAgIHN1Z2dlc3Rpb24udGV4dCxcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVNob3J0TmFtZXMsXG4gICAgKTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGVudGlyZSBjb21tYW5kIGFuZCByZWZlcmVuY2Ugd2l0aCB0aGUgY29udmVydGVkIGxpbmtcbiAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGNvbnZlcnRlZExpbmssIGNvbnRleHQuc3RhcnQsIGNvbnRleHQuZW5kKTtcblxuICAgIC8vIEhhbmRsZSBvcGVuaW5nIGxpbmtzXG4gICAgaWYgKHN1Z2dlc3Rpb24uY29tbWFuZCA9PT0gJ29wZW4nKSB7XG4gICAgICBjb25zdCB1cmwgPSBjb252ZXJ0QmlibGVUZXh0VG9MaW5rKHN1Z2dlc3Rpb24udGV4dCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh1cmwpKSB7XG4gICAgICAgIC8vIEZvciBvcGVuLXNwZWNpZmljLCBvcGVuIHRoZSBzcGVjaWZpZWQgbGluaywgb3RoZXJ3aXNlIG9wZW4gZmlyc3RcbiAgICAgICAgd2luZG93Lm9wZW4odXJsW3N1Z2dlc3Rpb24ubGlua0luZGV4IHx8IDBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpYnJhcnlMaW5rZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGlua1JlcGxhY2VyU2V0dGluZ3M7XG4gIHByaXZhdGUgYmlibGVTdWdnZXN0ZXI6IEJpYmxlUmVmZXJlbmNlU3VnZ2VzdGVyO1xuICBwcml2YXRlIHQgPSBUcmFuc2xhdGlvblNlcnZpY2UuZ2V0SW5zdGFuY2UoKS50LmJpbmQoVHJhbnNsYXRpb25TZXJ2aWNlLmdldEluc3RhbmNlKCkpO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIFRyYW5zbGF0aW9uU2VydmljZS5nZXRJbnN0YW5jZSgpLnNldExhbmd1YWdlKHRoaXMuc2V0dGluZ3MubGFuZ3VhZ2UpO1xuXG4gICAgLy8gQWRkIHRoZSBjb21tYW5kIGZvciBhbGwgbGluayByZXBsYWNlbWVudFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3JlcGxhY2UtbGlua3MnLFxuICAgICAgbmFtZTogdGhpcy50KCdjb21tYW5kcy5yZXBsYWNlTGlua3MnKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBjb252ZXJ0TGlua3MoY3VycmVudENvbnRlbnQsICdhbGwnKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50ICE9PSB1cGRhdGVkQ29udGVudCkge1xuICAgICAgICAgIGVkaXRvci5zZXRWYWx1ZSh1cGRhdGVkQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgY29tbWFuZCBmb3IgQmlibGUgbGlua3Mgb25seVxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3JlcGxhY2UtYmlibGUtbGlua3MnLFxuICAgICAgbmFtZTogdGhpcy50KCdjb21tYW5kcy5yZXBsYWNlQmlibGVMaW5rcycpLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGNvbnZlcnRMaW5rcyhjdXJyZW50Q29udGVudCwgJ2JpYmxlJyk7XG4gICAgICAgIGlmIChjdXJyZW50Q29udGVudCAhPT0gdXBkYXRlZENvbnRlbnQpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodXBkYXRlZENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGNvbW1hbmQgZm9yIHB1YmxpY2F0aW9uIGxpbmtzIG9ubHlcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdyZXBsYWNlLXB1YmxpY2F0aW9uLWxpbmtzJyxcbiAgICAgIG5hbWU6IHRoaXMudCgnY29tbWFuZHMucmVwbGFjZVB1YmxpY2F0aW9uTGlua3MnKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBjb252ZXJ0TGlua3MoY3VycmVudENvbnRlbnQsICdwdWJsaWNhdGlvbicpO1xuICAgICAgICBpZiAoY3VycmVudENvbnRlbnQgIT09IHVwZGF0ZWRDb250ZW50KSB7XG4gICAgICAgICAgZWRpdG9yLnNldFZhbHVlKHVwZGF0ZWRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEFkZCBjb21tYW5kIGZvciBCaWJsZSB0ZXh0IGNvbnZlcnNpb25cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdjb252ZXJ0LWJpYmxlLXRleHQnLFxuICAgICAgbmFtZTogdGhpcy50KCdjb21tYW5kcy5jb252ZXJ0QmlibGVSZWZlcmVuY2UnKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgY29uc3QgY29udmVydGVkTGluayA9IGNvbnZlcnRCaWJsZVRleHRUb01hcmtkb3duTGluayhcbiAgICAgICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudXNlU2hvcnROYW1lcyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGNvbnZlcnRlZExpbmspO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTGlua1JlcGxhY2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIHRoaXMuYmlibGVTdWdnZXN0ZXIgPSBuZXcgQmlibGVSZWZlcmVuY2VTdWdnZXN0ZXIodGhpcyk7XG4gICAgdGhpcy5yZWdpc3RlckVkaXRvclN1Z2dlc3QodGhpcy5iaWJsZVN1Z2dlc3Rlcik7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICAvLyBDbGVhbiB1cCBwbHVnaW4gcmVzb3VyY2VzIGlmIG5lZWRlZFxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuY2xhc3MgTGlua1JlcGxhY2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IExpYnJhcnlMaW5rZXJQbHVnaW47XG4gIHByaXZhdGUgdCA9IFRyYW5zbGF0aW9uU2VydmljZS5nZXRJbnN0YW5jZSgpLnQuYmluZChUcmFuc2xhdGlvblNlcnZpY2UuZ2V0SW5zdGFuY2UoKSk7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlicmFyeUxpbmtlclBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSh0aGlzLnQoJ3NldHRpbmdzLmxhbmd1YWdlLm5hbWUnKSlcbiAgICAgIC5zZXREZXNjKHRoaXMudCgnc2V0dGluZ3MubGFuZ3VhZ2UuZGVzY3JpcHRpb24nKSlcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbnMoe1xuICAgICAgICAgICAgZW46ICdFbmdsaXNoJyxcbiAgICAgICAgICAgIGRlOiAnRGV1dHNjaCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFuZ3VhZ2UpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogJ2VuJyB8ICdkZScpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhbmd1YWdlID0gdmFsdWU7XG4gICAgICAgICAgICBUcmFuc2xhdGlvblNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5zZXRMYW5ndWFnZSh2YWx1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUodGhpcy50KCdzZXR0aW5ncy51c2VTaG9ydE5hbWVzLm5hbWUnKSlcbiAgICAgIC5zZXREZXNjKHRoaXMudCgnc2V0dGluZ3MudXNlU2hvcnROYW1lcy5kZXNjcmlwdGlvbicpKVxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlU2hvcnROYW1lcykub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlU2hvcnROYW1lcyA9IHZhbHVlO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KSxcbiAgICAgICk7XG4gIH1cbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gY29udmVydEJpYmxlUmVmZXJlbmNlKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gUmVwbGFjZSAnandwdWI6Ly8nIHdpdGggJ2p3bGlicmFyeTovLydcbiAgdXJsID0gdXJsLnJlcGxhY2UoJ2p3cHViOi8vJywgJ2p3bGlicmFyeTovLycpO1xuICAvLyBFeHRyYWN0IHRoZSBCaWJsZSByZWZlcmVuY2UgcGFydHNcbiAgY29uc3QgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTtcbiAgY29uc3QgYmlibGVSZWYgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblxuICAvLyBFeHRyYWN0IGJvb2ssIGNoYXB0ZXIgYW5kIHZlcnNlXG4gIGNvbnN0IFtzdGFydEJvb2tDaGFwdGVyVmVyc2UsIGVuZEJvb2tDaGFwdGVyVmVyc2VdID0gYmlibGVSZWYuc3BsaXQoJy0nKTtcbiAgY29uc3QgW2Jvb2tTdGFydCwgY2hhcHRlclN0YXJ0LCB2ZXJzZVN0YXJ0XSA9IHN0YXJ0Qm9va0NoYXB0ZXJWZXJzZS5zcGxpdCgnOicpO1xuICBjb25zdCBbYm9va0VuZCwgY2hhcHRlckVuZCwgdmVyc2VFbmRdID0gZW5kQm9va0NoYXB0ZXJWZXJzZS5zcGxpdCgnOicpO1xuXG4gIC8vIEZvcm1hdCB0aGUgbnVtYmVycyB0byBlbnN1cmUgcHJvcGVyIHBhZGRpbmdcbiAgY29uc3QgZm9ybWF0dGVkQ2hhcHRlclN0YXJ0ID0gY2hhcHRlclN0YXJ0LnBhZFN0YXJ0KDMsICcwJyk7XG4gIGNvbnN0IGZvcm1hdHRlZFZlcnNlU3RhcnQgPSB2ZXJzZVN0YXJ0LnBhZFN0YXJ0KDMsICcwJyk7XG4gIGNvbnN0IGZvcm1hdHRlZENoYXB0ZXJFbmQgPSBjaGFwdGVyRW5kLnBhZFN0YXJ0KDMsICcwJyk7XG4gIGNvbnN0IGZvcm1hdHRlZFZlcnNlRW5kID0gdmVyc2VFbmQucGFkU3RhcnQoMywgJzAnKTtcblxuICBjb25zdCBmb3JtYXR0ZWRSZWZlcmVuY2VTdGFydCA9IGAke2Jvb2tTdGFydH0ke2Zvcm1hdHRlZENoYXB0ZXJTdGFydH0ke2Zvcm1hdHRlZFZlcnNlU3RhcnR9YDtcbiAgY29uc3QgZm9ybWF0dGVkUmVmZXJlbmNlRW5kID0gYCR7Ym9va0VuZH0ke2Zvcm1hdHRlZENoYXB0ZXJFbmR9JHtmb3JtYXR0ZWRWZXJzZUVuZH1gO1xuXG4gIGNvbnN0IGZvcm1hdHRlZFJlZmVyZW5jZSA9XG4gICAgZm9ybWF0dGVkUmVmZXJlbmNlU3RhcnQgPT09IGZvcm1hdHRlZFJlZmVyZW5jZUVuZFxuICAgICAgPyBmb3JtYXR0ZWRSZWZlcmVuY2VTdGFydFxuICAgICAgOiBgJHtmb3JtYXR0ZWRSZWZlcmVuY2VTdGFydH0tJHtmb3JtYXR0ZWRSZWZlcmVuY2VFbmR9YDtcblxuICByZXR1cm4gYGp3bGlicmFyeTovLy9maW5kZXI/YmlibGU9JHtmb3JtYXR0ZWRSZWZlcmVuY2V9YDtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gY29udmVydFB1YmxpY2F0aW9uUmVmZXJlbmNlKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTtcbiAgY29uc3QgcHViUmVmID0gcGFydHNbM107XG4gIGNvbnN0IFtsb2NhbGUsIGRvY0lkXSA9IHB1YlJlZi5zcGxpdCgnOicpO1xuICBjb25zdCBwYXJhZ3JhcGggPSBwYXJ0c1s0XTtcblxuICByZXR1cm4gYGp3bGlicmFyeTovLy9maW5kZXI/d3Rsb2NhbGU9JHtsb2NhbGV9JmRvY2lkPSR7ZG9jSWR9JnBhcj0ke3BhcmFncmFwaH1gO1xufVxuIiwgImltcG9ydCB7IGNvbnZlcnRCaWJsZVJlZmVyZW5jZSB9IGZyb20gJ0AvdXRpbHMvY29udmVydEJpYmxlUmVmZXJlbmNlJztcbmltcG9ydCB7IGNvbnZlcnRQdWJsaWNhdGlvblJlZmVyZW5jZSB9IGZyb20gJ0AvdXRpbHMvY29udmVydFB1YmxpY2F0aW9uUmVmZXJlbmNlJztcblxuZXhwb3J0IHR5cGUgQ29udmVyc2lvblR5cGUgPSAnYmlibGUnIHwgJ3B1YmxpY2F0aW9uJyB8ICdhbGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydExpbmtzKGNvbnRlbnQ6IHN0cmluZywgdHlwZTogQ29udmVyc2lvblR5cGUgPSAnYWxsJyk6IHN0cmluZyB7XG4gIGNvbnN0IHdpa2lMaW5rUmVnZXggPSAvXFxbKFteXFxdXSspXFxdXFwoKFteKV0rKVxcKS9nO1xuXG4gIHJldHVybiBjb250ZW50LnJlcGxhY2Uod2lraUxpbmtSZWdleCwgKG1hdGNoLCB0ZXh0LCB1cmwpID0+IHtcbiAgICAvLyBIYW5kbGUgQmlibGUgcmVmZXJlbmNlc1xuICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnandwdWI6Ly9iLycpICYmICh0eXBlID09PSAnYmlibGUnIHx8IHR5cGUgPT09ICdhbGwnKSkge1xuICAgICAgcmV0dXJuIGBbJHt0ZXh0fV0oJHtjb252ZXJ0QmlibGVSZWZlcmVuY2UodXJsKX0pYDtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHB1YmxpY2F0aW9uIHJlZmVyZW5jZXNcbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJ2p3cHViOi8vcC8nKSAmJiAodHlwZSA9PT0gJ3B1YmxpY2F0aW9uJyB8fCB0eXBlID09PSAnYWxsJykpIHtcbiAgICAgIHJldHVybiBgWyR7dGV4dH1dKCR7Y29udmVydFB1YmxpY2F0aW9uUmVmZXJlbmNlKHVybCl9KWA7XG4gICAgfVxuICAgIHJldHVybiBtYXRjaDtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgQmlibGVCb29rIH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBiaWJsZUJvb2tzREU6IHJlYWRvbmx5IEJpYmxlQm9va1tdID0gW1xuICB7XG4gICAgaWQ6IDEsXG4gICAgYWxpYXNlczogWycxbW8nLCAnMS5tbycsICcxbW9zZScsICcxLm1vc2UnXSxcbiAgICBsb25nTmFtZTogJzEuIE1vc2UnLFxuICAgIHNob3J0TmFtZTogJzFNbycsXG4gIH0sXG4gIHtcbiAgICBpZDogMixcbiAgICBhbGlhc2VzOiBbJzJtbycsICcyLm1vJywgJzJtb3NlJywgJzIubW9zZSddLFxuICAgIGxvbmdOYW1lOiAnMi4gTW9zZScsXG4gICAgc2hvcnROYW1lOiAnMk1vJyxcbiAgfSxcbiAge1xuICAgIGlkOiAzLFxuICAgIGFsaWFzZXM6IFsnM21vJywgJzMubW8nLCAnM21vc2UnLCAnMy5tb3NlJ10sXG4gICAgbG9uZ05hbWU6ICczLiBNb3NlJyxcbiAgICBzaG9ydE5hbWU6ICczTW8nLFxuICB9LFxuICB7XG4gICAgaWQ6IDQsXG4gICAgYWxpYXNlczogWyc0bW8nLCAnNC5tbycsICc0bW9zZScsICc0Lm1vc2UnXSxcbiAgICBsb25nTmFtZTogJzQuIE1vc2UnLFxuICAgIHNob3J0TmFtZTogJzRNbycsXG4gIH0sXG4gIHtcbiAgICBpZDogNSxcbiAgICBhbGlhc2VzOiBbJzVtbycsICc1Lm1vJywgJzVtb3NlJywgJzUubW9zZSddLFxuICAgIGxvbmdOYW1lOiAnNS4gTW9zZScsXG4gICAgc2hvcnROYW1lOiAnNU1vJyxcbiAgfSxcbiAge1xuICAgIGlkOiA2LFxuICAgIGFsaWFzZXM6IFsnam9zJywgJ2pvc3VhJ10sXG4gICAgbG9uZ05hbWU6ICdKb3N1YScsXG4gICAgc2hvcnROYW1lOiAnSm9zJyxcbiAgfSxcbiAge1xuICAgIGlkOiA3LFxuICAgIGFsaWFzZXM6IFsncmknLCAncmljaHQnLCAncmljaHRlciddLFxuICAgIGxvbmdOYW1lOiAnUmljaHRlcicsXG4gICAgc2hvcnROYW1lOiAnUmknLFxuICB9LFxuICB7XG4gICAgaWQ6IDgsXG4gICAgYWxpYXNlczogWydydScsICdydXQnLCAncnV0aCddLFxuICAgIGxvbmdOYW1lOiAnUnV0aCcsXG4gICAgc2hvcnROYW1lOiAnUnUnLFxuICB9LFxuICB7XG4gICAgaWQ6IDksXG4gICAgYWxpYXNlczogWycxc2FtJywgJzEuc2FtJywgJzFzYW11ZWwnLCAnMS5zYW11ZWwnXSxcbiAgICBsb25nTmFtZTogJzEuIFNhbXVlbCcsXG4gICAgc2hvcnROYW1lOiAnMVNhbScsXG4gIH0sXG4gIHtcbiAgICBpZDogMTAsXG4gICAgYWxpYXNlczogWycyc2FtJywgJzIuc2FtJywgJzJzYW11ZWwnLCAnMi5zYW11ZWwnXSxcbiAgICBsb25nTmFtZTogJzIuIFNhbXVlbCcsXG4gICAgc2hvcnROYW1lOiAnMlNhbScsXG4gIH0sXG4gIHtcbiAgICBpZDogMTEsXG4gICAgYWxpYXNlczogWycxa1x1MDBGNicsICcxLmtcdTAwRjYnLCAnMWtcdTAwRjZuJywgJzEua1x1MDBGNm4nLCAnMWtcdTAwRjZuaWdlJywgJzEua1x1MDBGNm5pZ2UnXSxcbiAgICBsb25nTmFtZTogJzEuIEtcdTAwRjZuaWdlJyxcbiAgICBzaG9ydE5hbWU6ICcxS1x1MDBGNicsXG4gIH0sXG4gIHtcbiAgICBpZDogMTIsXG4gICAgYWxpYXNlczogWycya1x1MDBGNicsICcyLmtcdTAwRjYnLCAnMmtcdTAwRjZuJywgJzIua1x1MDBGNm4nLCAnMmtcdTAwRjZuaWdlJywgJzIua1x1MDBGNm5pZ2UnXSxcbiAgICBsb25nTmFtZTogJzIuIEtcdTAwRjZuaWdlJyxcbiAgICBzaG9ydE5hbWU6ICcyS1x1MDBGNicsXG4gIH0sXG4gIHtcbiAgICBpZDogMTMsXG4gICAgYWxpYXNlczogW1xuICAgICAgJzFjaHInLFxuICAgICAgJzEuY2hyJyxcbiAgICAgICcxY2hyb24nLFxuICAgICAgJzEuY2hyb24nLFxuICAgICAgJzFjaHJvbmlrJyxcbiAgICAgICcxLmNocm9uaWsnLFxuICAgICAgJzFjaHJvbmlrYScsXG4gICAgICAnMS5jaHJvbmlrYScsXG4gICAgXSxcbiAgICBsb25nTmFtZTogJzEuIENocm9uaWthJyxcbiAgICBzaG9ydE5hbWU6ICcxQ2hyJyxcbiAgfSxcbiAge1xuICAgIGlkOiAxNCxcbiAgICBhbGlhc2VzOiBbXG4gICAgICAnMmNocicsXG4gICAgICAnMi5jaHInLFxuICAgICAgJzJjaHJvbicsXG4gICAgICAnMi5jaHJvbicsXG4gICAgICAnMmNocm9uaWsnLFxuICAgICAgJzIuY2hyb25paycsXG4gICAgICAnMmNocm9uaWthJyxcbiAgICAgICcyLmNocm9uaWthJyxcbiAgICBdLFxuICAgIGxvbmdOYW1lOiAnMi4gQ2hyb25pa2EnLFxuICAgIHNob3J0TmFtZTogJzJDaHInLFxuICB9LFxuICB7XG4gICAgaWQ6IDE1LFxuICAgIGFsaWFzZXM6IFsnZXNyJywgJ2VzcmEnXSxcbiAgICBsb25nTmFtZTogJ0VzcmEnLFxuICAgIHNob3J0TmFtZTogJ0VzcicsXG4gIH0sXG4gIHtcbiAgICBpZDogMTYsXG4gICAgYWxpYXNlczogWyduZWgnLCAnbmVoZW0nLCAnbmVoZW1pYSddLFxuICAgIGxvbmdOYW1lOiAnTmVoZW1pYScsXG4gICAgc2hvcnROYW1lOiAnTmVoJyxcbiAgfSxcbiAge1xuICAgIGlkOiAxNyxcbiAgICBhbGlhc2VzOiBbJ2VzdCcsICdlc3RoJywgJ2VzdGVyJywgJ2VzdGhlciddLFxuICAgIGxvbmdOYW1lOiAnRXN0aGVyJyxcbiAgICBzaG9ydE5hbWU6ICdFc3RoJyxcbiAgfSxcbiAge1xuICAgIGlkOiAxOCxcbiAgICBhbGlhc2VzOiBbJ2hpJywgJ2hpb2InXSxcbiAgICBsb25nTmFtZTogJ0hpb2InLFxuICAgIHNob3J0TmFtZTogJ0hpJyxcbiAgfSxcbiAge1xuICAgIGlkOiAxOSxcbiAgICBhbGlhc2VzOiBbJ3BzJywgJ3BzYScsICdwc2FsbScsICdwc2FsbWVuJ10sXG4gICAgbG9uZ05hbWU6ICdQc2FsbScsXG4gICAgc2hvcnROYW1lOiAnUHMnLFxuICB9LFxuICB7XG4gICAgaWQ6IDIwLFxuICAgIGFsaWFzZXM6IFsnc3ByJywgJ3Nwclx1MDBGQycsICdzcHJ1ZScsICdzcHJcdTAwRkNjaGUnXSxcbiAgICBsb25nTmFtZTogJ1Nwclx1MDBGQ2NoZScsXG4gICAgc2hvcnROYW1lOiAnU3ByJyxcbiAgfSxcbiAge1xuICAgIGlkOiAyMSxcbiAgICBhbGlhc2VzOiBbJ3ByZWQnLCAncHJlZGlnZXInXSxcbiAgICBsb25nTmFtZTogJ1ByZWRpZ2VyJyxcbiAgICBzaG9ydE5hbWU6ICdQcmVkJyxcbiAgfSxcbiAge1xuICAgIGlkOiAyMixcbiAgICBhbGlhc2VzOiBbJ2hvaCcsICdobCcsICdob2hlc2xpZWQnLCAnaG9oZXMgbGllZCddLFxuICAgIGxvbmdOYW1lOiAnSG9oZXMgTGllZCcsXG4gICAgc2hvcnROYW1lOiAnSG9oJyxcbiAgfSxcbiAge1xuICAgIGlkOiAyMyxcbiAgICBhbGlhc2VzOiBbJ2plcycsICdqZXNhamEnXSxcbiAgICBsb25nTmFtZTogJ0plc2FqYScsXG4gICAgc2hvcnROYW1lOiAnSmVzJyxcbiAgfSxcbiAge1xuICAgIGlkOiAyNCxcbiAgICBhbGlhc2VzOiBbJ2plcicsICdqZXJlbWlhJ10sXG4gICAgbG9uZ05hbWU6ICdKZXJlbWlhJyxcbiAgICBzaG9ydE5hbWU6ICdKZXInLFxuICB9LFxuICB7XG4gICAgaWQ6IDI1LFxuICAgIGFsaWFzZXM6IFsna2xhZycsICdrbGcnLCAna2xnbCcsICdrbGFnZWxpZWRlciddLFxuICAgIGxvbmdOYW1lOiAnS2xhZ2VsaWVkZXInLFxuICAgIHNob3J0TmFtZTogJ0tsZycsXG4gIH0sXG4gIHtcbiAgICBpZDogMjYsXG4gICAgYWxpYXNlczogWydoZXMnLCAnaGVzZWtpZWwnXSxcbiAgICBsb25nTmFtZTogJ0hlc2VraWVsJyxcbiAgICBzaG9ydE5hbWU6ICdIZXMnLFxuICB9LFxuICB7XG4gICAgaWQ6IDI3LFxuICAgIGFsaWFzZXM6IFsnZGFuJywgJ2RhbmllbCddLFxuICAgIGxvbmdOYW1lOiAnRGFuaWVsJyxcbiAgICBzaG9ydE5hbWU6ICdEYW4nLFxuICB9LFxuICB7XG4gICAgaWQ6IDI4LFxuICAgIGFsaWFzZXM6IFsnaG9zJywgJ2hvc2VhJ10sXG4gICAgbG9uZ05hbWU6ICdIb3NlYScsXG4gICAgc2hvcnROYW1lOiAnSG9zJyxcbiAgfSxcbiAge1xuICAgIGlkOiAyOSxcbiAgICBhbGlhc2VzOiBbJ2pvZScsICdqb2VsJ10sXG4gICAgbG9uZ05hbWU6ICdKb2VsJyxcbiAgICBzaG9ydE5hbWU6ICdKb2VsJyxcbiAgfSxcbiAge1xuICAgIGlkOiAzMCxcbiAgICBhbGlhc2VzOiBbJ2FtJywgJ2Ftb3MnXSxcbiAgICBsb25nTmFtZTogJ0Ftb3MnLFxuICAgIHNob3J0TmFtZTogJ0FtJyxcbiAgfSxcbiAge1xuICAgIGlkOiAzMSxcbiAgICBhbGlhc2VzOiBbJ29iJywgJ29iZCcsICdvYmFkamEnXSxcbiAgICBsb25nTmFtZTogJ09iYWRqYScsXG4gICAgc2hvcnROYW1lOiAnT2InLFxuICB9LFxuICB7XG4gICAgaWQ6IDMyLFxuICAgIGFsaWFzZXM6IFsnam9uJywgJ2pvbmEnXSxcbiAgICBsb25nTmFtZTogJ0pvbmEnLFxuICAgIHNob3J0TmFtZTogJ0pvbicsXG4gIH0sXG4gIHtcbiAgICBpZDogMzMsXG4gICAgYWxpYXNlczogWydtaScsICdtaWNoYSddLFxuICAgIGxvbmdOYW1lOiAnTWljaGEnLFxuICAgIHNob3J0TmFtZTogJ01pJyxcbiAgfSxcbiAge1xuICAgIGlkOiAzNCxcbiAgICBhbGlhc2VzOiBbJ25haCcsICduYWh1bSddLFxuICAgIGxvbmdOYW1lOiAnTmFodW0nLFxuICAgIHNob3J0TmFtZTogJ05haCcsXG4gIH0sXG4gIHtcbiAgICBpZDogMzUsXG4gICAgYWxpYXNlczogWydoYWInLCAnaGFiYWt1ayddLFxuICAgIGxvbmdOYW1lOiAnSGFiYWt1aycsXG4gICAgc2hvcnROYW1lOiAnSGFiJyxcbiAgfSxcbiAge1xuICAgIGlkOiAzNixcbiAgICBhbGlhc2VzOiBbJ3plcGgnLCAnemVmYW5qYScsICd6ZXBoYW5qYSddLFxuICAgIGxvbmdOYW1lOiAnWmVwaGFuamEnLFxuICAgIHNob3J0TmFtZTogJ1plcGgnLFxuICB9LFxuICB7XG4gICAgaWQ6IDM3LFxuICAgIGFsaWFzZXM6IFsnaGFnJywgJ2hhZ2dhaSddLFxuICAgIGxvbmdOYW1lOiAnSGFnZ2FpJyxcbiAgICBzaG9ydE5hbWU6ICdIYWcnLFxuICB9LFxuICB7XG4gICAgaWQ6IDM4LFxuICAgIGFsaWFzZXM6IFsnc2FjaCcsICdzYWNoYXJqYSddLFxuICAgIGxvbmdOYW1lOiAnU2FjaGFyamEnLFxuICAgIHNob3J0TmFtZTogJ1NhY2gnLFxuICB9LFxuICB7XG4gICAgaWQ6IDM5LFxuICAgIGFsaWFzZXM6IFsnbWFsJywgJ21hbGVhY2hpJ10sXG4gICAgbG9uZ05hbWU6ICdNYWxlYWNoaScsXG4gICAgc2hvcnROYW1lOiAnTWFsJyxcbiAgfSxcbiAge1xuICAgIGlkOiA0MCxcbiAgICBhbGlhc2VzOiBbJ210JywgJ21hdCcsICdtYXR0JywgJ21hdHRoJywgJ21hdHRoXHUwMEU0dXMnXSxcbiAgICBsb25nTmFtZTogJ01hdHRoXHUwMEU0dXMnLFxuICAgIHNob3J0TmFtZTogJ01hdCcsXG4gIH0sXG4gIHtcbiAgICBpZDogNDEsXG4gICAgYWxpYXNlczogWydtYXInLCAnbWFya3VzJ10sXG4gICAgbG9uZ05hbWU6ICdNYXJrdXMnLFxuICAgIHNob3J0TmFtZTogJ01hcicsXG4gIH0sXG4gIHtcbiAgICBpZDogNDIsXG4gICAgYWxpYXNlczogWydsaycsICdsdWsnLCAnbHVrYXMnXSxcbiAgICBsb25nTmFtZTogJ0x1a2FzJyxcbiAgICBzaG9ydE5hbWU6ICdMdWsnLFxuICB9LFxuICB7XG4gICAgaWQ6IDQzLFxuICAgIGFsaWFzZXM6IFsnam9oJywgJ2pvaGFubmVzJ10sXG4gICAgbG9uZ05hbWU6ICdKb2hhbm5lcycsXG4gICAgc2hvcnROYW1lOiAnSm9oJyxcbiAgfSxcbiAge1xuICAgIGlkOiA0NCxcbiAgICBhbGlhc2VzOiBbJ2FwZycsICdhcG9zdGVsZ2VzY2hpY2h0ZSddLFxuICAgIGxvbmdOYW1lOiAnQXBvc3RlbGdlc2NoaWNodGUnLFxuICAgIHNob3J0TmFtZTogJ0FwZycsXG4gIH0sXG4gIHtcbiAgICBpZDogNDUsXG4gICAgYWxpYXNlczogWydyXHUwMEY2bScsICdyXHUwMEY2bWVyJ10sXG4gICAgbG9uZ05hbWU6ICdSXHUwMEY2bWVyJyxcbiAgICBzaG9ydE5hbWU6ICdSXHUwMEY2bScsXG4gIH0sXG4gIHtcbiAgICBpZDogNDYsXG4gICAgYWxpYXNlczogWycxa29yJywgJzEua29yJywgJzFrb3JpbnRoZXInLCAnMS5rb3JpbnRoZXInXSxcbiAgICBsb25nTmFtZTogJzEuIEtvcmludGhlcicsXG4gICAgc2hvcnROYW1lOiAnMUtvcicsXG4gIH0sXG4gIHtcbiAgICBpZDogNDcsXG4gICAgYWxpYXNlczogWycya29yJywgJzIua29yJywgJzJrb3JpbnRoZXInLCAnMi5rb3JpbnRoZXInXSxcbiAgICBsb25nTmFtZTogJzIuIEtvcmludGhlcicsXG4gICAgc2hvcnROYW1lOiAnMktvcicsXG4gIH0sXG4gIHtcbiAgICBpZDogNDgsXG4gICAgYWxpYXNlczogWydnYWwnLCAnZ2FsYXRlciddLFxuICAgIGxvbmdOYW1lOiAnR2FsYXRlcicsXG4gICAgc2hvcnROYW1lOiAnR2FsJyxcbiAgfSxcbiAge1xuICAgIGlkOiA0OSxcbiAgICBhbGlhc2VzOiBbJ2VwaCcsICdlcGhlc2VyJ10sXG4gICAgbG9uZ05hbWU6ICdFcGhlc2VyJyxcbiAgICBzaG9ydE5hbWU6ICdFcGgnLFxuICB9LFxuICB7XG4gICAgaWQ6IDUwLFxuICAgIGFsaWFzZXM6IFsncGhpbCcsICdwaGlsaXBwZXInXSxcbiAgICBsb25nTmFtZTogJ1BoaWxpcHBlcicsXG4gICAgc2hvcnROYW1lOiAnUGhpbCcsXG4gIH0sXG4gIHtcbiAgICBpZDogNTEsXG4gICAgYWxpYXNlczogWydrb2wnLCAna29sb3NzZXInXSxcbiAgICBsb25nTmFtZTogJ0tvbG9zc2VyJyxcbiAgICBzaG9ydE5hbWU6ICdLb2wnLFxuICB9LFxuICB7XG4gICAgaWQ6IDUyLFxuICAgIGFsaWFzZXM6IFsnMXRoJywgJzEudGgnLCAnMXRoZXMnLCAnMS50aGVzJywgJzF0aGVzc2Fsb25pY2hlcicsICcxLnRoZXNzYWxvbmljaGVyJ10sXG4gICAgbG9uZ05hbWU6ICcxLiBUaGVzc2Fsb25pY2hlcicsXG4gICAgc2hvcnROYW1lOiAnMVRoJyxcbiAgfSxcbiAge1xuICAgIGlkOiA1MyxcbiAgICBhbGlhc2VzOiBbJzJ0aCcsICcyLnRoJywgJzJ0aGVzJywgJzIudGhlcycsICcydGhlc3NhbG9uaWNoZXInLCAnMi50aGVzc2Fsb25pY2hlciddLFxuICAgIGxvbmdOYW1lOiAnMi4gVGhlc3NhbG9uaWNoZXInLFxuICAgIHNob3J0TmFtZTogJzJUaCcsXG4gIH0sXG4gIHtcbiAgICBpZDogNTQsXG4gICAgYWxpYXNlczogWycxdGltJywgJzEudGltJywgJzF0aW1vdGhldXMnLCAnMS50aW1vdGhldXMnXSxcbiAgICBsb25nTmFtZTogJzEuIFRpbW90aGV1cycsXG4gICAgc2hvcnROYW1lOiAnMVRpbScsXG4gIH0sXG4gIHtcbiAgICBpZDogNTUsXG4gICAgYWxpYXNlczogWycydGltJywgJzIudGltJywgJzJ0aW1vdGhldXMnLCAnMi50aW1vdGhldXMnXSxcbiAgICBsb25nTmFtZTogJzIuIFRpbW90aGV1cycsXG4gICAgc2hvcnROYW1lOiAnMlRpbScsXG4gIH0sXG4gIHtcbiAgICBpZDogNTYsXG4gICAgYWxpYXNlczogWyd0aXQnLCAndGl0dXMnXSxcbiAgICBsb25nTmFtZTogJ1RpdHVzJyxcbiAgICBzaG9ydE5hbWU6ICdUaXQnLFxuICB9LFxuICB7XG4gICAgaWQ6IDU3LFxuICAgIGFsaWFzZXM6IFsncGhtJywgJ3BobG0nLCAncGhpbGVtb24nXSxcbiAgICBsb25nTmFtZTogJ1BoaWxlbW9uJyxcbiAgICBzaG9ydE5hbWU6ICdQaG0nLFxuICB9LFxuICB7XG4gICAgaWQ6IDU4LFxuICAgIGFsaWFzZXM6IFsnaGVicicsICdoZWInLCAnaGViclx1MDBFNGVyJ10sXG4gICAgbG9uZ05hbWU6ICdIZWJyXHUwMEU0ZXInLFxuICAgIHNob3J0TmFtZTogJ0hlYnInLFxuICB9LFxuICB7XG4gICAgaWQ6IDU5LFxuICAgIGFsaWFzZXM6IFsnamFrJywgJ2pha29idXMnXSxcbiAgICBsb25nTmFtZTogJ0pha29idXMnLFxuICAgIHNob3J0TmFtZTogJ0phaycsXG4gIH0sXG4gIHtcbiAgICBpZDogNjAsXG4gICAgYWxpYXNlczogWycxcGUnLCAnMS5wZScsICcxcGV0JywgJzEucGV0JywgJzFwZXRydXMnLCAnMS5wZXRydXMnXSxcbiAgICBsb25nTmFtZTogJzEuIFBldHJ1cycsXG4gICAgc2hvcnROYW1lOiAnMVBlJyxcbiAgfSxcbiAge1xuICAgIGlkOiA2MSxcbiAgICBhbGlhc2VzOiBbJzJwZScsICcyLnBlJywgJzJwZXQnLCAnMi5wZXQnLCAnMnBldHJ1cycsICcyLnBldHJ1cyddLFxuICAgIGxvbmdOYW1lOiAnMi4gUGV0cnVzJyxcbiAgICBzaG9ydE5hbWU6ICcyUGUnLFxuICB9LFxuICB7XG4gICAgaWQ6IDYyLFxuICAgIGFsaWFzZXM6IFsnMWpvaCcsICcxLmpvaCcsICcxam9oYW5uZXMnLCAnMS5qb2hhbm5lcyddLFxuICAgIGxvbmdOYW1lOiAnMS4gSm9oYW5uZXMnLFxuICAgIHNob3J0TmFtZTogJzFKb2gnLFxuICB9LFxuICB7XG4gICAgaWQ6IDYzLFxuICAgIGFsaWFzZXM6IFsnMmpvaCcsICcyLmpvaCcsICcyam9oYW5uZXMnLCAnMi5qb2hhbm5lcyddLFxuICAgIGxvbmdOYW1lOiAnMi4gSm9oYW5uZXMnLFxuICAgIHNob3J0TmFtZTogJzJKb2gnLFxuICB9LFxuICB7XG4gICAgaWQ6IDY0LFxuICAgIGFsaWFzZXM6IFsnM2pvaCcsICczLmpvaCcsICczam9oYW5uZXMnLCAnMy5qb2hhbm5lcyddLFxuICAgIGxvbmdOYW1lOiAnMy4gSm9oYW5uZXMnLFxuICAgIHNob3J0TmFtZTogJzNKb2gnLFxuICB9LFxuICB7XG4gICAgaWQ6IDY1LFxuICAgIGFsaWFzZXM6IFsnanVkJywgJ2p1ZGFzJ10sXG4gICAgbG9uZ05hbWU6ICdKdWRhcycsXG4gICAgc2hvcnROYW1lOiAnSnVkJyxcbiAgfSxcbiAge1xuICAgIGlkOiA2NixcbiAgICBhbGlhc2VzOiBbJ29mZicsICdvZmZiJywgJ29mZmVuYmFydW5nJywgJ29mZmVuYiddLFxuICAgIGxvbmdOYW1lOiAnT2ZmZW5iYXJ1bmcnLFxuICAgIHNob3J0TmFtZTogJ09mZicsXG4gIH0sXG5dIGFzIGNvbnN0O1xuIiwgImltcG9ydCB7IGJpYmxlQm9va3NERSB9IGZyb20gJ0AvYmlibGVCb29rcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQm9va0luZGV4KGJvb2tRdWVyeTogc3RyaW5nKTogbnVtYmVyIHtcbiAgYm9va1F1ZXJ5ID0gYm9va1F1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBmb3IgKGNvbnN0IGJvb2sgb2YgYmlibGVCb29rc0RFKSB7XG4gICAgaWYgKGJvb2suYWxpYXNlcy5pbmNsdWRlcyhib29rUXVlcnkpKSB7XG4gICAgICByZXR1cm4gYm9vay5pZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuIiwgImltcG9ydCB7IGZpbmRCb29rSW5kZXggfSBmcm9tICdAL3V0aWxzL2ZpbmRCb29rSW5kZXgnO1xuaW1wb3J0IHR5cGUgeyBCaWJsZVJlZmVyZW5jZSwgVmVyc2VSYW5nZSB9IGZyb20gJ0AvdHlwZXMnO1xuXG5mdW5jdGlvbiBwYXJzZVZlcnNlTnVtYmVyKHZlcnNlOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBudW0gPSBwYXJzZUludCh2ZXJzZSwgMTApO1xuICBpZiAoaXNOYU4obnVtKSB8fCBudW0gPCAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZlcnNlIG51bWJlcicpO1xuICB9XG4gIHJldHVybiBudW07XG59XG5cbmZ1bmN0aW9uIHBhZFZlcnNlKHZlcnNlOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gdmVyc2UudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVZlcnNlUmFuZ2VzKHZlcnNlUGFydDogc3RyaW5nKTogVmVyc2VSYW5nZVtdIHtcbiAgLy8gUmVtb3ZlIGFueSB0cmFpbGluZyBjb21tYXNcbiAgdmVyc2VQYXJ0ID0gdmVyc2VQYXJ0LnRyaW0oKTtcbiAgaWYgKHZlcnNlUGFydC5lbmRzV2l0aCgnLCcpKSB7XG4gICAgdmVyc2VQYXJ0ID0gdmVyc2VQYXJ0LnNsaWNlKDAsIC0xKTtcbiAgfVxuXG4gIC8vIFNwbGl0IGJ5IGNvbW1hIGFuZCBjbGVhbiB1cCB3aGl0ZXNwYWNlXG4gIGNvbnN0IHBhcnRzID0gdmVyc2VQYXJ0XG4gICAgLnNwbGl0KCcsJylcbiAgICAubWFwKChwKSA9PiBwLnRyaW0oKSlcbiAgICAuZmlsdGVyKChwKSA9PiBwLmxlbmd0aCA+IDApO1xuXG4gIC8vIENoZWNrIGZvciBlbXB0eSBwYXJ0cyAoY29uc2VjdXRpdmUgY29tbWFzKVxuICBpZiAocGFydHMubGVuZ3RoICE9PSB2ZXJzZVBhcnQuc3BsaXQoJywnKS5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmVyc2UgbnVtYmVyJyk7XG4gIH1cblxuICBjb25zdCByYW5nZXM6IFZlcnNlUmFuZ2VbXSA9IFtdO1xuICBsZXQgbGFzdEVuZFZlcnNlID0gMDtcbiAgbGV0IGN1cnJlbnRSYW5nZTogVmVyc2VSYW5nZSB8IG51bGwgPSBudWxsO1xuXG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgIC8vIENoZWNrIGZvciBpbnZhbGlkIHBhdHRlcm5zIGxpa2UgXCIxLTItM1wiIG9yIFwiMS0tMlwiXG4gICAgaWYgKChwYXJ0Lm1hdGNoKC8tL2cpIHx8IFtdKS5sZW5ndGggPiAxIHx8IHBhcnQuaW5jbHVkZXMoJy0tJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2ZXJzZSBudW1iZXInKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcmFuZ2UgKGUuZy4sIFwiNy04XCIpXG4gICAgaWYgKHBhcnQuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gcGFydC5zcGxpdCgnLScpLm1hcCgodikgPT4ge1xuICAgICAgICBpZiAoIXYgfHwgdi5zdGFydHNXaXRoKCctJykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmVyc2UgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlVmVyc2VOdW1iZXIodik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgICAgICAvLyBUaGlzIGNhdGNoZXMgYm90aCBlcXVhbCBhbmQgZGVzY2VuZGluZyBjYXNlc1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZlcnNlcyBtdXN0IGJlIGluIGFzY2VuZGluZyBvcmRlcicpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0IDw9IGxhc3RFbmRWZXJzZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZlcnNlcyBtdXN0IGJlIGluIGFzY2VuZGluZyBvcmRlcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGlzIHJhbmdlIHN0YXJ0cyByaWdodCBhZnRlciB0aGUgY3VycmVudCByYW5nZSwgZXh0ZW5kIGl0XG4gICAgICBpZiAoY3VycmVudFJhbmdlICYmIHN0YXJ0ID09PSBsYXN0RW5kVmVyc2UgKyAxKSB7XG4gICAgICAgIGN1cnJlbnRSYW5nZS5lbmQgPSBwYWRWZXJzZShlbmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFJhbmdlID0ge1xuICAgICAgICAgIHN0YXJ0OiBwYWRWZXJzZShzdGFydCksXG4gICAgICAgICAgZW5kOiBwYWRWZXJzZShlbmQpLFxuICAgICAgICB9O1xuICAgICAgICByYW5nZXMucHVzaChjdXJyZW50UmFuZ2UpO1xuICAgICAgfVxuICAgICAgbGFzdEVuZFZlcnNlID0gZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBIYW5kbGUgc2luZ2xlIHZlcnNlXG4gICAgICBjb25zdCB2ZXJzZSA9IHBhcnNlVmVyc2VOdW1iZXIocGFydCk7XG4gICAgICBpZiAodmVyc2UgPD0gbGFzdEVuZFZlcnNlKSB7XG4gICAgICAgIC8vIFRoaXMgY2F0Y2hlcyByZXBlYXRlZCB2ZXJzZXNcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWZXJzZXMgbXVzdCBiZSBpbiBhc2NlbmRpbmcgb3JkZXInKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhpcyB2ZXJzZSBpcyBjb25zZWN1dGl2ZSB3aXRoIHRoZSBjdXJyZW50IHJhbmdlLCBleHRlbmQgaXRcbiAgICAgIGlmIChjdXJyZW50UmFuZ2UgJiYgdmVyc2UgPT09IGxhc3RFbmRWZXJzZSArIDEpIHtcbiAgICAgICAgY3VycmVudFJhbmdlLmVuZCA9IHBhZFZlcnNlKHZlcnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRSYW5nZSA9IHtcbiAgICAgICAgICBzdGFydDogcGFkVmVyc2UodmVyc2UpLFxuICAgICAgICAgIGVuZDogcGFkVmVyc2UodmVyc2UpLFxuICAgICAgICB9O1xuICAgICAgICByYW5nZXMucHVzaChjdXJyZW50UmFuZ2UpO1xuICAgICAgfVxuICAgICAgbGFzdEVuZFZlcnNlID0gdmVyc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJhbmdlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmlibGVSZWZlcmVuY2UoaW5wdXQ6IHN0cmluZyk6IEJpYmxlUmVmZXJlbmNlIHtcbiAgaW5wdXQgPSBpbnB1dC50cmltKCkudG9Mb3dlckNhc2UoKTtcblxuICAvLyBNYXRjaCBib29rLCBjaGFwdGVyLCBhbmQgdmVyc2VzIHBhcnRcbiAgY29uc3QgbWF0Y2ggPSBpbnB1dC5tYXRjaCgvXihbYS16MC05XHUwMEU0XHUwMEY2XHUwMEZDXHUwMERGXSs/KVxccyooXFxkKylcXHMqOlxccyooLispJC9pKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmb3JtYXQnKTtcbiAgfVxuXG4gIGNvbnN0IFssIGJvb2tOYW1lLCBjaGFwdGVyLCB2ZXJzZXNQYXJ0XSA9IG1hdGNoO1xuICBjb25zdCBib29rSW5kZXggPSBmaW5kQm9va0luZGV4KGJvb2tOYW1lLnRyaW0oKSk7XG4gIGlmIChib29rSW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCb29rIG5vdCBmb3VuZCcpO1xuICB9XG5cbiAgY29uc3QgcGFkZGVkQm9vayA9IGJvb2tJbmRleCA8IDEwID8gYDAke2Jvb2tJbmRleH1gIDogYm9va0luZGV4LnRvU3RyaW5nKCk7XG4gIGNvbnN0IHBhZGRlZENoYXB0ZXIgPSBjaGFwdGVyLnBhZFN0YXJ0KDMsICcwJyk7XG5cbiAgLy8gU2ltcGxlIHZlcnNlIG9yIHJhbmdlIHBhdHRlcm5cbiAgY29uc3Qgc2ltcGxlTWF0Y2ggPSB2ZXJzZXNQYXJ0Lm1hdGNoKC9eKFxcZCspKD86LShcXGQrKSk/JC8pO1xuICBpZiAoc2ltcGxlTWF0Y2gpIHtcbiAgICBjb25zdCBbLCB2ZXJzZSwgZW5kVmVyc2VdID0gc2ltcGxlTWF0Y2g7XG4gICAgaWYgKGVuZFZlcnNlICYmIHBhcnNlVmVyc2VOdW1iZXIodmVyc2UpID49IHBhcnNlVmVyc2VOdW1iZXIoZW5kVmVyc2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZlcnNlcyBtdXN0IGJlIGluIGFzY2VuZGluZyBvcmRlcicpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYm9vazogcGFkZGVkQm9vayxcbiAgICAgIGNoYXB0ZXI6IHBhZGRlZENoYXB0ZXIsXG4gICAgICB2ZXJzZVJhbmdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgc3RhcnQ6IHBhZFZlcnNlKHBhcnNlVmVyc2VOdW1iZXIodmVyc2UpKSxcbiAgICAgICAgICBlbmQ6IGVuZFZlcnNlID8gcGFkVmVyc2UocGFyc2VWZXJzZU51bWJlcihlbmRWZXJzZSkpIDogcGFkVmVyc2UocGFyc2VWZXJzZU51bWJlcih2ZXJzZSkpLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ29tcGxleCB2ZXJzZSByYW5nZXNcbiAgdHJ5IHtcbiAgICBjb25zdCB2ZXJzZVJhbmdlcyA9IHBhcnNlVmVyc2VSYW5nZXModmVyc2VzUGFydCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJvb2s6IHBhZGRlZEJvb2ssXG4gICAgICBjaGFwdGVyOiBwYWRkZWRDaGFwdGVyLFxuICAgICAgdmVyc2VSYW5nZXMsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmb3JtYXQnKTtcbiAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgQmlibGVSZWZlcmVuY2UgfSBmcm9tICdAL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEpXTGlicmFyeUxpbmsocmVmZXJlbmNlOiBCaWJsZVJlZmVyZW5jZSk6IHN0cmluZyB8IHN0cmluZ1tdIHtcbiAgY29uc3QgeyBib29rLCBjaGFwdGVyLCB2ZXJzZVJhbmdlcyB9ID0gcmVmZXJlbmNlO1xuXG4gIGlmICghdmVyc2VSYW5nZXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVmZXJlbmNlIGZvcm1hdCcpO1xuICB9XG5cbiAgLy8gRm9yIGEgc2luZ2xlIHJhbmdlLCByZXR1cm4gYSBzaW5nbGUgc3RyaW5nXG4gIGlmICh2ZXJzZVJhbmdlcy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHZlcnNlUmFuZ2VzWzBdO1xuICAgIGNvbnN0IGJhc2VSZWZlcmVuY2UgPSBgJHtib29rfSR7Y2hhcHRlcn0ke3N0YXJ0fWA7XG4gICAgcmV0dXJuIHN0YXJ0ID09PSBlbmRcbiAgICAgID8gYGp3bGlicmFyeTovLy9maW5kZXI/YmlibGU9JHtiYXNlUmVmZXJlbmNlfWBcbiAgICAgIDogYGp3bGlicmFyeTovLy9maW5kZXI/YmlibGU9JHtiYXNlUmVmZXJlbmNlfS0ke2Jvb2t9JHtjaGFwdGVyfSR7ZW5kfWA7XG4gIH1cblxuICAvLyBGb3IgbXVsdGlwbGUgcmFuZ2VzLCByZXR1cm4gYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICByZXR1cm4gdmVyc2VSYW5nZXMubWFwKCh7IHN0YXJ0LCBlbmQgfSkgPT4ge1xuICAgIGNvbnN0IGJhc2VSZWZlcmVuY2UgPSBgJHtib29rfSR7Y2hhcHRlcn0ke3N0YXJ0fWA7XG4gICAgcmV0dXJuIHN0YXJ0ID09PSBlbmRcbiAgICAgID8gYGp3bGlicmFyeTovLy9maW5kZXI/YmlibGU9JHtiYXNlUmVmZXJlbmNlfWBcbiAgICAgIDogYGp3bGlicmFyeTovLy9maW5kZXI/YmlibGU9JHtiYXNlUmVmZXJlbmNlfS0ke2Jvb2t9JHtjaGFwdGVyfSR7ZW5kfWA7XG4gIH0pO1xufVxuIiwgImltcG9ydCB7IGJpYmxlQm9va3NERSB9IGZyb20gJ0AvYmlibGVCb29rcyc7XG5pbXBvcnQgeyBwYXJzZUJpYmxlUmVmZXJlbmNlIH0gZnJvbSAnQC91dGlscy9wYXJzZUJpYmxlUmVmZXJlbmNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEJpYmxlVGV4dChpbnB1dDogc3RyaW5nLCBzaG9ydCA9IGZhbHNlKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWZlcmVuY2UgPSBwYXJzZUJpYmxlUmVmZXJlbmNlKGlucHV0KTtcbiAgICBjb25zdCBib29rSW5kZXggPSBwYXJzZUludChyZWZlcmVuY2UuYm9vaykgLSAxO1xuICAgIGNvbnN0IGJvb2tFbnRyeSA9IGJpYmxlQm9va3NERVtib29rSW5kZXhdO1xuXG4gICAgLy8gVXNlIHNob3J0IG9yIGxvbmcgbmFtZSBiYXNlZCBvbiBzZXR0aW5nc1xuICAgIGNvbnN0IGJvb2tOYW1lID0gc2hvcnQgPyBib29rRW50cnkuc2hvcnROYW1lIDogYm9va0VudHJ5LmxvbmdOYW1lO1xuXG4gICAgLy8gRm9ybWF0IHRoZSB2ZXJzZSByZWZlcmVuY2VcbiAgICBjb25zdCB2ZXJzZVJlZnMgPSByZWZlcmVuY2UudmVyc2VSYW5nZXMhLm1hcCgocmFuZ2UpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2VJbnQocmFuZ2Uuc3RhcnQpO1xuICAgICAgY29uc3QgZW5kID0gcGFyc2VJbnQocmFuZ2UuZW5kKTtcbiAgICAgIHJldHVybiBzdGFydCA9PT0gZW5kID8gc3RhcnQudG9TdHJpbmcoKSA6IGAke3N0YXJ0fS0ke2VuZH1gO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGAke2Jvb2tOYW1lfSAke3BhcnNlSW50KHJlZmVyZW5jZS5jaGFwdGVyKX06JHt2ZXJzZVJlZnMuam9pbignLCcpfWA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG59XG4iLCAiaW1wb3J0IHsgcGFyc2VCaWJsZVJlZmVyZW5jZSB9IGZyb20gJ0AvdXRpbHMvcGFyc2VCaWJsZVJlZmVyZW5jZSc7XG5pbXBvcnQgeyBmb3JtYXRKV0xpYnJhcnlMaW5rIH0gZnJvbSAnQC91dGlscy9mb3JtYXRKV0xpYnJhcnlMaW5rJztcbmltcG9ydCB7IGZvcm1hdEJpYmxlVGV4dCB9IGZyb20gJ0AvdXRpbHMvZm9ybWF0QmlibGVUZXh0JztcbmltcG9ydCB7IGJpYmxlQm9va3NERSB9IGZyb20gJ0AvYmlibGVCb29rcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QmlibGVUZXh0VG9MaW5rKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgfCBzdHJpbmdbXSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVmZXJlbmNlID0gcGFyc2VCaWJsZVJlZmVyZW5jZShpbnB1dCk7XG4gICAgcmV0dXJuIGZvcm1hdEpXTGlicmFyeUxpbmsocmVmZXJlbmNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb252ZXJ0aW5nIEJpYmxlIHRleHQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QmlibGVUZXh0VG9NYXJrZG93bkxpbmsoaW5wdXQ6IHN0cmluZywgc2hvcnQgPSBmYWxzZSk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVmZXJlbmNlID0gcGFyc2VCaWJsZVJlZmVyZW5jZShpbnB1dCk7XG4gICAgY29uc3QgbGlua3MgPSBmb3JtYXRKV0xpYnJhcnlMaW5rKHJlZmVyZW5jZSk7XG5cbiAgICAvLyBFYXJseSByZXR1cm4gaW5wdXQgaWYgdGhlcmUgYXJlIG5vIHZhbGlkIGxpbmtzXG4gICAgaWYgKCFsaW5rcyB8fCAoQXJyYXkuaXNBcnJheShsaW5rcykgJiYgIWxpbmtzLmxlbmd0aCkpIHtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5rcykpIHtcbiAgICAgIC8vIEZvciBjb21wbGV4IHJlZmVyZW5jZXMsIGNyZWF0ZSBtdWx0aXBsZSBsaW5rc1xuICAgICAgY29uc3QgYm9va0VudHJ5ID0gYmlibGVCb29rc0RFLmZpbmQoKGJvb2spID0+IGJvb2suaWQgPT09IHBhcnNlSW50KHJlZmVyZW5jZS5ib29rKSk7XG5cbiAgICAgIGlmICghYm9va0VudHJ5KSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYm9va05hbWUgPSBzaG9ydCA/IGJvb2tFbnRyeS5zaG9ydE5hbWUgOiBib29rRW50cnkubG9uZ05hbWU7XG4gICAgICBjb25zdCBjaGFwdGVyID0gcGFyc2VJbnQocmVmZXJlbmNlLmNoYXB0ZXIpO1xuXG4gICAgICAvLyBGb3JtYXQgdmVyc2UgcmFuZ2VzIHdpdGhvdXQgbGVhZGluZyB6ZXJvc1xuICAgICAgY29uc3QgdmVyc2VSYW5nZXMgPSByZWZlcmVuY2UudmVyc2VSYW5nZXMhLm1hcCgocmFuZ2UpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZUludChyYW5nZS5zdGFydCk7XG4gICAgICAgIGNvbnN0IGVuZCA9IHBhcnNlSW50KHJhbmdlLmVuZCk7XG4gICAgICAgIHJldHVybiBzdGFydCA9PT0gZW5kID8gc3RhcnQudG9TdHJpbmcoKSA6IGAke3N0YXJ0fS0ke2VuZH1gO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhcnJheSBvZiBtYXJrZG93biBsaW5rc1xuICAgICAgcmV0dXJuIHZlcnNlUmFuZ2VzXG4gICAgICAgIC5tYXAoKHJhbmdlLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGxpbmsgaW5jbHVkZXMgYm9vayBuYW1lIGFuZCBjaGFwdGVyXG4gICAgICAgICAgICByZXR1cm4gYFske2Jvb2tOYW1lfSAke2NoYXB0ZXJ9OiR7cmFuZ2V9XSgke2xpbmtzW2ldfSlgO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBTdWJzZXF1ZW50IGxpbmtzIG9ubHkgaW5jbHVkZSB2ZXJzZSBudW1iZXJzXG4gICAgICAgICAgcmV0dXJuIGBbJHtyYW5nZX1dKCR7bGlua3NbaV19KWA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcsJyk7XG4gICAgfVxuXG4gICAgLy8gRm9yIHNpbXBsZSByZWZlcmVuY2VzXG4gICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGZvcm1hdEJpYmxlVGV4dChpbnB1dCwgc2hvcnQpO1xuICAgIHJldHVybiBgWyR7Zm9ybWF0dGVkVGV4dH1dKCR7bGlua3N9KWA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IGVuID0ge1xuICBzZXR0aW5nczoge1xuICAgIGxhbmd1YWdlOiB7XG4gICAgICBuYW1lOiAnTGFuZ3VhZ2UnLFxuICAgICAgZGVzY3JpcHRpb246ICdTZWxlY3QgdGhlIGxhbmd1YWdlIGZvciB0aGUgcGx1Z2luIGludGVyZmFjZSBhbmQgQmlibGUgcmVmZXJlbmNlcycsXG4gICAgfSxcbiAgICB1c2VTaG9ydE5hbWVzOiB7XG4gICAgICBuYW1lOiAnVXNlIHNob3J0IG5hbWVzIGluIEJpYmxlIGxpbmtzJyxcbiAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAnV2hlbiBlbmFibGVkLCBCaWJsZSByZWZlcmVuY2VzIHdpbGwgdXNlIGFiYnJldmlhdGVkIGJvb2sgbmFtZXMgKGUuZy4sIFwiMVBlXCIgaW5zdGVhZCBvZiBcIjEuIFBldGVyXCIpJyxcbiAgICB9LFxuICB9LFxuICBjb21tYW5kczoge1xuICAgIHJlcGxhY2VMaW5rczogJ0NvbnZlcnQgYWxsIGxpbmtzJyxcbiAgICByZXBsYWNlQmlibGVMaW5rczogJ0NvbnZlcnQgQmlibGUgdmVyc2UgbGlua3MnLFxuICAgIHJlcGxhY2VQdWJsaWNhdGlvbkxpbmtzOiAnQ29udmVydCBwdWJsaWNhdGlvbiBsaW5rcycsXG4gICAgY29udmVydEJpYmxlUmVmZXJlbmNlOiAnQ29udmVydCBCaWJsZSByZWZlcmVuY2UgdG8gTGlicmFyeSBsaW5rJyxcbiAgfSxcbiAgbm90aWNlczoge1xuICAgIG11bHRpcGxlQm9va3NGb3VuZDogJ011bHRpcGxlIEJpYmxlIGJvb2tzIGZvdW5kOiB7e2Jvb2tzfX0nLFxuICB9LFxuICBzdWdnZXN0aW9uczoge1xuICAgIGNyZWF0ZUxpbms6ICdDcmVhdGUgbGluazoge3t0ZXh0fX0nLFxuICAgIGNyZWF0ZUxpbmtzOiAnQ3JlYXRlIGxpbmtzOiB7e3RleHR9fScsXG4gICAgY3JlYXRlQW5kT3BlbjogJ0NyZWF0ZSBhbmQgb3Blbjoge3t0ZXh0fX0nLFxuICAgIGNyZWF0ZUFuZE9wZW5WZXJzZTogJ0NyZWF0ZSBhbmQgb3Blbjoge3t2ZXJzZX19JyxcbiAgfSxcbn07XG4iLCAiZXhwb3J0IGNvbnN0IGRlID0ge1xuICBzZXR0aW5nczoge1xuICAgIGxhbmd1YWdlOiB7XG4gICAgICBuYW1lOiAnU3ByYWNoZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1dcdTAwRTRobGUgZGllIFNwcmFjaGUgZlx1MDBGQ3IgZGllIFBsdWdpbi1PYmVyZmxcdTAwRTRjaGUgdW5kIEJpYmVsdmVyd2Vpc2UnLFxuICAgIH0sXG4gICAgdXNlU2hvcnROYW1lczoge1xuICAgICAgbmFtZTogJ0t1cnpuYW1lbiBpbiBCaWJlbHZlcndlaXNlbiB2ZXJ3ZW5kZW4nLFxuICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICdXZW5uIGFrdGl2aWVydCwgd2VyZGVuIEJpYmVsdmVyd2Vpc2UgbWl0IGFiZ2VrXHUwMEZDcnp0ZW4gQnVjaG5hbWVuIGFuZ2V6ZWlndCAoei5CLiBcIjFQZVwiIHN0YXR0IFwiMS4gUGV0cnVzXCIpJyxcbiAgICB9LFxuICB9LFxuICBjb21tYW5kczoge1xuICAgIHJlcGxhY2VMaW5rczogJ0FsbGUgTGlua3MgdW13YW5kZWxuJyxcbiAgICByZXBsYWNlQmlibGVMaW5rczogJ0JpYmVsdmVycy1MaW5rcyB1bXdhbmRlbG4nLFxuICAgIHJlcGxhY2VQdWJsaWNhdGlvbkxpbmtzOiAnUHVibGlrYXRpb25zLUxpbmtzIHVtd2FuZGVsbicsXG4gICAgY29udmVydEJpYmxlUmVmZXJlbmNlOiAnQmliZWxzdGVsbGUgaW4gSlcgTGlicmFyeS1MaW5rIHVtd2FuZGVsbicsXG4gIH0sXG4gIG5vdGljZXM6IHtcbiAgICBtdWx0aXBsZUJvb2tzRm91bmQ6ICdNZWhyZXJlIEJpYmVsYlx1MDBGQ2NoZXIgZ2VmdW5kZW46IHt7Ym9va3N9fScsXG4gIH0sXG4gIHN1Z2dlc3Rpb25zOiB7XG4gICAgY3JlYXRlTGluazogJ0xpbmsgZXJzdGVsbGVuOiB7e3RleHR9fScsXG4gICAgY3JlYXRlTGlua3M6ICdMaW5rcyBlcnN0ZWxsZW46IHt7dGV4dH19JyxcbiAgICBjcmVhdGVBbmRPcGVuOiAnRXJzdGVsbGVuIHVuZCBcdTAwRjZmZm5lbjoge3t0ZXh0fX0nLFxuICAgIGNyZWF0ZUFuZE9wZW5WZXJzZTogJ0Vyc3RlbGxlbiB1bmQgXHUwMEY2ZmZuZW46IHt7dmVyc2V9fScsXG4gIH0sXG59O1xuIiwgImltcG9ydCB7IGVuIH0gZnJvbSAnQC9sb2NhbGUvZW4nO1xuaW1wb3J0IHsgZGUgfSBmcm9tICdAL2xvY2FsZS9kZSc7XG5pbXBvcnQgdHlwZSB7IExhbmd1YWdlIH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogVHJhbnNsYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlIGN1cnJlbnRMYW5ndWFnZTogTGFuZ3VhZ2UgPSAnZW4nO1xuICBwcml2YXRlIHRyYW5zbGF0aW9uczogUmVjb3JkPExhbmd1YWdlLCB0eXBlb2YgZW4+ID0ge1xuICAgIGVuLFxuICAgIGRlLFxuICB9O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVHJhbnNsYXRpb25TZXJ2aWNlIHtcbiAgICBpZiAoIVRyYW5zbGF0aW9uU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgVHJhbnNsYXRpb25TZXJ2aWNlLmluc3RhbmNlID0gbmV3IFRyYW5zbGF0aW9uU2VydmljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gVHJhbnNsYXRpb25TZXJ2aWNlLmluc3RhbmNlO1xuICB9XG5cbiAgcHVibGljIHNldExhbmd1YWdlKGxhbmd1YWdlOiBMYW5ndWFnZSk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudExhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gIH1cblxuICBwdWJsaWMgdChrZXk6IHN0cmluZywgdmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge30pOiBzdHJpbmcge1xuICAgIGNvbnN0IGtleXMgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICBsZXQgdmFsdWU6IGFueSA9IHRoaXMudHJhbnNsYXRpb25zW3RoaXMuY3VycmVudExhbmd1YWdlXTtcblxuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiBrIGluIHZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVba107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oYFRyYW5zbGF0aW9uIGtleSBub3QgZm91bmQ6ICR7a2V5fWApO1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXBsYWNlVmFyaWFibGVzKHZhbHVlLCB2YXJpYWJsZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXk7XG4gIH1cblxuICBwcml2YXRlIHJlcGxhY2VWYXJpYWJsZXModGV4dDogc3RyaW5nLCB2YXJpYWJsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xce1xceyhcXHcrKVxcfVxcfS9nLCAobWF0Y2gsIGtleSkgPT4ge1xuICAgICAgcmV0dXJuIHZhcmlhYmxlc1trZXldIHx8IG1hdGNoO1xuICAgIH0pO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFVTzs7O0FDVkEsU0FBUyxzQkFBc0IsS0FBcUI7QUFFekQsUUFBTSxJQUFJLFFBQVEsWUFBWSxjQUFjO0FBRTVDLFFBQU0sUUFBUSxJQUFJLE1BQU0sR0FBRztBQUMzQixRQUFNLFdBQVcsTUFBTSxNQUFNLFNBQVMsQ0FBQztBQUd2QyxRQUFNLENBQUMsdUJBQXVCLG1CQUFtQixJQUFJLFNBQVMsTUFBTSxHQUFHO0FBQ3ZFLFFBQU0sQ0FBQyxX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VixXQUFXO0FBQUEsRUFDYjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLFNBQVMsQ0FBQyxRQUFRLE9BQU8sUUFBUSxhQUFhO0FBQUEsSUFDOUMsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsT0FBTyxVQUFVO0FBQUEsSUFDM0IsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsT0FBTyxRQUFRO0FBQUEsSUFDekIsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsT0FBTyxPQUFPO0FBQUEsSUFDeEIsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsT0FBTyxNQUFNO0FBQUEsSUFDdkIsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsTUFBTSxNQUFNO0FBQUEsSUFDdEIsVUFBVTtBQUFBLElBQ1YsV0FBVztBQUFBLEVBQ2I7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixTQUFTLENBQUMsTUFBTSxPQUFPLFFBQVE7QUFBQSxJQUMvQixVQUFVO0FBQUEsSUFDVixXQUFXO0FBQUEsRUFDYjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLFNBQVMsQ0FBQyxPQUFPLE1BQU07QUFBQSxJQUN2QixVQUFVO0FBQUEsSUFDVixXQUFXO0FBQUEsRUFDYjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLFNBQVMsQ0FBQyxNQUFNLE9BQU87QUFBQSxJQUN2QixVQUFVO0FBQUEsSUFDVixXQUFXO0FBQUEsRUFDYjtBQUFB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
